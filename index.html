<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restaurant Digital Asset Manager</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 50;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }
        
        .modal.active {
            display: flex;
        }
        
        .folder-nav {
            overflow-y: auto;
            max-height: calc(100vh - 64px);
        }
        
        .asset-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
        }
        
        .truncate-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .folder-active {
            background-color: #EFF6FF;
            color: #2563EB;
            border-left: 3px solid #2563EB;
        }
        
        .folder-button {
            border-left: 3px solid transparent;
        }
        
        .folder-button:hover:not(.folder-active) {
            background-color: #F3F4F6;
        }
        
        .asset-card {
            transition: all 0.2s ease;
        }
        
        .asset-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        @media (max-width: 768px) {
            .folder-structure {
                display: none;
            }
            
            .mobile-menu-active .folder-structure {
                display: block;
                position: fixed;
                top: 64px;
                left: 0;
                width: 100%;
                height: calc(100vh - 64px);
                z-index: 40;
            }
        }
    </style>
</head>
<body class="bg-gray-100 h-screen flex flex-col overflow-hidden">
    <!-- Single instance of the DAM interface -->
    <div id="dam-container">
        <!-- Header -->
        <header class="bg-white border-b border-gray-200 px-4 py-3 flex items-center shadow-sm">
            <div class="flex items-center">
                <svg class="h-8 w-8 text-blue-600 mr-2" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" fill="currentColor"/>
                    <path d="M14 17H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z" fill="currentColor"/>
                </svg>
                <div class="text-lg font-medium text-gray-900">Restaurant Digital Asset Manager</div>
            </div>
            <div class="flex-grow mx-4">
                <div class="relative">
                    <input 
                        type="text" 
                        id="search-input"
                        placeholder="Search assets by name, description or tags" 
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                    >
                    <button class="absolute right-2 top-2 text-gray-500">
                        <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                    </button>
                </div>
            </div>
            <div class="flex items-center space-x-4">
                <button 
                    id="upload-btn"
                    class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
                >
                    <svg class="h-4 w-4 mr-1" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                    </svg>
                    Upload
                </button>
                <div class="h-8 w-8 bg-blue-600 rounded-full text-white flex items-center justify-center font-bold">
                    U
                </div>
            </div>
        </header>

        <!-- Main content -->
        <div class="flex flex-1 overflow-hidden">
            <!-- Folder structure - Main folders -->
            <div class="folder-structure w-64 bg-white border-r border-gray-200 flex flex-col">
                <nav class="folder-nav flex-1 pt-3 pb-4">
                    <div class="px-4 mb-2 text-xs font-semibold text-gray-500 uppercase tracking-wider">
                        Main Categories
                    </div>
                    <ul id="main-folders" class="mt-2 mb-3">
                        <!-- Main folders will be populated here -->
                    </ul>
                </nav>
            </div>
            
            <!-- Main content area -->
            <div class="flex-1 flex flex-col overflow-hidden">
                <!-- Breadcrumb & toolbar -->
                <div class="bg-white p-4 border-b border-gray-200 flex flex-wrap items-center">
                    <div class="flex items-center text-sm text-gray-600 mr-6">
                        <a href="#" id="breadcrumb-all" class="hover:text-blue-600">All Assets</a>
                        <span id="breadcrumb-separator-1" class="mx-2 hidden">/</span>
                        <a href="#" id="breadcrumb-main" class="hover:text-blue-600 hidden"></a>
                        <span id="breadcrumb-separator-2" class="mx-2 hidden">/</span>
                        <a href="#" id="breadcrumb-sub" class="hover:text-blue-600 hidden"></a>
                        <span id="breadcrumb-separator-3" class="mx-2 hidden">/</span>
                        <span id="breadcrumb-detail" class="text-gray-900 font-medium hidden"></span>
                    </div>
                    
                    <div class="ml-auto flex space-x-3 items-center">
                        <span class="text-sm text-gray-500" id="asset-count">0 assets</span>
                        
                        <div class="flex border border-gray-300 rounded-md">
                            <button id="grid-view-btn" class="px-3 py-1.5 bg-gray-100 text-gray-800">
                                <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
                                </svg>
                            </button>
                            <button id="list-view-btn" class="px-3 py-1.5 text-gray-600">
                                <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16" />
                                </svg>
                            </button>
                        </div>
                        
                        <select
                            id="sort-by"
                            class="px-3 py-1.5 border border-gray-300 rounded-md text-sm"
                        >
                            <option value="date">Sort by Date</option>
                            <option value="name">Sort by Name</option>
                            <option value="type">Sort by Type</option>
                        </select>
                        
                        <button
                            id="sort-order"
                            class="px-3 py-1.5 border border-gray-300 rounded-md"
                        >
                            <svg class="h-5 w-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12" />
                            </svg>
                        </button>

                        <button 
                            id="delete-btn"
                            class="px-3 py-1.5 rounded text-sm bg-gray-200 text-gray-400 cursor-not-allowed"
                            disabled
                        >
                            <div class="flex items-center">
                                <svg class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                </svg>
                                Delete
                            </div>
                        </button>
                    </div>
                </div>

                <!-- Asset display area -->
                <div id="asset-container" class="flex-1 overflow-y-auto p-6 bg-gray-50">
                    <div id="empty-state" class="text-center py-12 hidden">
                        <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
                        </svg>
                        <h3 class="mt-2 text-sm font-medium text-gray-900">No assets found</h3>
                        <p class="mt-1 text-sm text-gray-500" id="empty-state-message">
                            Get started by adding assets to this folder
                        </p>
                        <div class="mt-6">
                            <button
                                id="empty-upload-btn"
                                class="inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                            >
                                <svg class="-ml-1 mr-2 h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                                </svg>
                                Upload an asset
                            </button>
                        </div>
                    </div>
                    <div id="grid-view" class="asset-grid">
                        <!-- Assets in grid view will be populated here -->
                    </div>
                    <div id="list-view" class="hidden">
                        <div class="bg-white shadow overflow-hidden border-b border-gray-200 rounded-lg">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-8">
                                            <input
                                                type="checkbox"
                                                id="select-all"
                                                class="h-4 w-4 text-blue-600 border-gray-300 rounded"
                                            >
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Asset
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Type
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Tags
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Date Modified
                                        </th>
                                        <th scope="col" class="relative px-6 py-3">
                                            <span class="sr-only">Actions</span>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody id="asset-list" class="bg-white divide-y divide-gray-200">
                                    <!-- Assets in list view will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Status message -->
    <div id="status-message" class="fixed bottom-4 right-4 px-4 py-2 rounded-lg shadow-lg bg-green-600 text-white hidden"></div>

    <!-- Storage status banner -->
    <div class="fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-white border border-gray-200 px-4 py-2 rounded-lg shadow-lg z-40">
        <div class="flex items-center text-sm">
            <svg class="h-5 w-5 text-green-500 mr-2" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
            </svg>
            <span>Changes are being saved to browser storage</span>
        </div>
    </div>

    <!-- Upload Asset Modal -->
    <div id="upload-modal" class="modal">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl">
            <div class="px-6 py-4 border-b border-gray-200">
                <h3 class="text-lg font-medium text-gray-900">Upload New Asset</h3>
            </div>
            <div class="p-6">
                <div class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="asset-name" class="block text-sm font-medium text-gray-700">Asset Name *</label>
                            <input
                                type="text"
                                id="asset-name"
                                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                                required
                            >
                        </div>
                        <div>
                            <label for="asset-type" class="block text-sm font-medium text-gray-700">Asset Type</label>
                            <select
                                id="asset-type"
                                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                            >
                                <option value="image">Image</option>
                                <option value="document">Document</option>
                                <option value="video">Video</option>
                                <option value="audio">Audio</option>
                                <option value="design">Design File</option>
                            </select>
                        </div>
                    </div>
                    
                    <div>
                        <label for="asset-description" class="block text-sm font-medium text-gray-700">Description</label>
                        <textarea
                            id="asset-description"
                            rows="3"
                            class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                        ></textarea>
                    </div>
                    
                    <div>
                        <label for="asset-tags" class="block text-sm font-medium text-gray-700">Tags (comma separated)</label>
                        <input
                            type="text"
                            id="asset-tags"
                            class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                            placeholder="menu, logo, food, summer"
                        >
                    </div>
                    
                    <div>
                        <label for="asset-path" class="block text-sm font-medium text-gray-700">File Path *</label>
                        <div class="mt-1 flex rounded-md shadow-sm">
                            <input
                                type="text"
                                id="asset-path"
                                class="flex-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                                placeholder="/path/to/your/file.ext"
                                required
                            >
                            <button
                                type="button"
                                id="browse-btn"
                                class="ml-2 inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
                            >
                                Browse
                            </button>
                        </div>
                        <p class="mt-1 text-xs text-gray-500">Enter the full path where the file is stored</p>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label for="folder-select" class="block text-sm font-medium text-gray-700">Main Folder</label>
                            <select
                                id="folder-select"
                                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                            >
                                <!-- Folders will be populated here -->
                            </select>
                        </div>
                        
                        <div>
                            <label for="subfolder-select" class="block text-sm font-medium text-gray-700">Subfolder</label>
                            <select
                                id="subfolder-select"
                                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                                disabled
                            >
                                <option value="">Select subfolder</option>
                            </select>
                        </div>
                        
                        <div>
                            <label for="detail-folder-select" class="block text-sm font-medium text-gray-700">Detail Folder</label>
                            <select
                                id="detail-folder-select"
                                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                                disabled
                            >
                                <option value="">Select detail folder</option>
                            </select>
                        </div>
                    </div>

                    <div id="upload-status" class="mt-4 px-4 py-3 rounded-md hidden"></div>
                </div>
            </div>
            <div class="px-6 py-4 border-t border-gray-200 flex justify-end space-x-3">
                <button
                    type="button"
                    id="cancel-upload-btn"
                    class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
                >
                    Cancel
                </button>
                <button
                    type="button"
                    id="confirm-upload-btn"
                    class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
                >
                    Upload Asset
                </button>
            </div>
        </div>
    </div>

    <!-- Asset Detail Modal -->
    <div id="asset-detail-modal" class="modal">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col">
            <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center">
                <h3 class="text-lg font-medium text-gray-900">Asset Details</h3>
                <button id="close-detail-btn" class="text-gray-400 hover:text-gray-500">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="flex-1 overflow-y-auto p-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <div class="bg-gray-100 rounded-lg p-4 flex items-center justify-center h-80">
                            <img 
                                id="detail-thumbnail" 
                                src="" 
                                alt=""
                                class="max-h-full max-w-full object-contain"
                            >
                        </div>
                        
                        <div class="mt-6">
                            <h3 class="text-sm font-medium text-gray-700">Asset Path Information</h3>
                            <p class="mt-2 text-sm text-gray-600">Path: <span id="detail-path" class="font-mono text-gray-800"></span></p>
                            
                            <div class="mt-4 bg-gray-50 p-3 rounded-md border border-gray-200">
                                <h4 class="text-xs font-medium text-gray-700 mb-1">Full path for reference:</h4>
                                <div id="detail-full-path" class="font-mono text-xs text-gray-600 break-all"></div>
                            </div>
                        </div>
                    </div>

                    <div>
                        <div class="flex items-start mb-4">
                            <div class="mr-3 mt-1" id="detail-type-icon"></div>
                            <div>
                                <h2 id="detail-name" class="text-xl font-bold text-gray-900"></h2>
                                <p id="detail-file-info" class="text-sm text-gray-500"></p>
                            </div>
                        </div>

                        <div class="space-y-6">
                            <div>
                                <h3 class="text-sm font-medium text-gray-700">Description</h3>
                                <p id="detail-description" class="mt-1 text-sm text-gray-600"></p>
                            </div>
                            
                            <div>
                                <h3 class="text-sm font-medium text-gray-700">Tags</h3>
                                <div id="detail-tags" class="flex flex-wrap gap-2 mt-2"></div>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <h3 class="text-sm font-medium text-gray-700">Created</h3>
                                    <p id="detail-created" class="mt-1 text-sm text-gray-600"></p>
                                </div>
                                <div>
                                    <h3 class="text-sm font-medium text-gray-700">Modified</h3>
                                    <p id="detail-modified" class="mt-1 text-sm text-gray-600"></p>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <h3 class="text-sm font-medium text-gray-700">Created By</h3>
                                    <p id="detail-creator" class="mt-1 text-sm text-gray-600"></p>
                                </div>
                                <div id="detail-dimensions-container" class="hidden">
                                    <h3 class="text-sm font-medium text-gray-700">Dimensions</h3>
                                    <p id="detail-dimensions" class="mt-1 text-sm text-gray-600"></p>
                                </div>
                                <div id="detail-duration-container" class="hidden">
                                    <h3 class="text-sm font-medium text-gray-700">Duration</h3>
                                    <p id="detail-duration" class="mt-1 text-sm text-gray-600"></p>
                                </div>
                            </div>
                            
                            <div>
                                <h3 class="text-sm font-medium text-gray-700">Location</h3>
                                <div id="detail-location" class="mt-1 flex items-center space-x-2 text-sm text-gray-600"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="px-6 py-4 border-t border-gray-200">
                <div class="flex justify-between">
                    <div>
                        <button class="inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                            <svg class="-ml-1 mr-2 h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
                            </svg>
                            Edit
                        </button>
                    </div>
                    <div class="flex space-x-3">
                        <button class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                            <svg class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                            </svg>
                            Download
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Application data and state
        let mainFolders;
        let subFolders;
        let assetTypes;
        let assets = [];

        // Application state
        let state = {
            activeFolder: null,
            activeSubfolder: null,
            activeDetailFolder: null,
            searchTerm: '',
            selectedAssets: [],
            viewMode: 'grid',
            sortBy: 'date',
            sortOrder: 'desc',
            currentAsset: null
        };

        // DOM Elements
        const elements = {
            mainFoldersList: document.getElementById('main-folders'),
            breadcrumbAll: document.getElementById('breadcrumb-all'),
            breadcrumbMain: document.getElementById('breadcrumb-main'),
            breadcrumbSub: document.getElementById('breadcrumb-sub'),
            breadcrumbDetail: document.getElementById('breadcrumb-detail'),
            breadcrumbSeparator1: document.getElementById('breadcrumb-separator-1'),
            breadcrumbSeparator2: document.getElementById('breadcrumb-separator-2'),
            breadcrumbSeparator3: document.getElementById('breadcrumb-separator-3'),
            assetCount: document.getElementById('asset-count'),
            gridView: document.getElementById('grid-view'),
            listView: document.getElementById('list-view'),
            assetList: document.getElementById('asset-list'),
            emptyState: document.getElementById('empty-state'),
            emptyStateMessage: document.getElementById('empty-state-message'),
            gridViewBtn: document.getElementById('grid-view-btn'),
            listViewBtn: document.getElementById('list-view-btn'),
            sortBySelect: document.getElementById('sort-by'),
            sortOrderBtn: document.getElementById('sort-order'),
            deleteBtn: document.getElementById('delete-btn'),
            searchInput: document.getElementById('search-input'),
            uploadBtn: document.getElementById('upload-btn'),
            emptyUploadBtn: document.getElementById('empty-upload-btn'),
            uploadModal: document.getElementById('upload-modal'),
            confirmUploadBtn: document.getElementById('confirm-upload-btn'),
            cancelUploadBtn: document.getElementById('cancel-upload-btn'),
            assetDetailModal: document.getElementById('asset-detail-modal'),
            closeDetailBtn: document.getElementById('close-detail-btn'),
            statusMessage: document.getElementById('status-message'),
            assetName: document.getElementById('asset-name'),
            assetDescription: document.getElementById('asset-description'),
            assetType: document.getElementById('asset-type'),
            assetTags: document.getElementById('asset-tags'),
            assetPath: document.getElementById('asset-path'),
            folderSelect: document.getElementById('folder-select'),
            subfolderSelect: document.getElementById('subfolder-select'),
            detailFolderSelect: document.getElementById('detail-folder-select'),
            browseBtn: document.getElementById('browse-btn'),
            uploadStatus: document.getElementById('upload-status'),
            selectAll: document.getElementById('select-all'),
            detailThumbnail: document.getElementById('detail-thumbnail'),
            detailPath: document.getElementById('detail-path'),
            detailFullPath: document.getElementById('detail-full-path'),
            detailTypeIcon: document.getElementById('detail-type-icon'),
            detailName: document.getElementById('detail-name'),
            detailFileInfo: document.getElementById('detail-file-info'),
            detailDescription: document.getElementById('detail-description'),
            detailTags: document.getElementById('detail-tags'),
            detailCreated: document.getElementById('detail-created'),
            detailModified: document.getElementById('detail-modified'),
            detailCreator: document.getElementById('detail-creator'),
            detailDimensionsContainer: document.getElementById('detail-dimensions-container'),
            detailDimensions: document.getElementById('detail-dimensions'),
            detailDurationContainer: document.getElementById('detail-duration-container'),
            detailDuration: document.getElementById('detail-duration'),
            detailLocation: document.getElementById('detail-location')
        };

        // Initialize application
        function init() {
            // Initialize asset types
            mainFolders = [
                { id: 'brand-assets', name: 'BRAND ASSETS', icon: 'palette' },
                { id: 'menus', name: 'MENUS', icon: 'utensils' },
                { id: 'menu-content', name: 'MENU CONTENT', icon: 'camera' },
                { id: 'marketing-materials', name: 'MARKETING MATERIALS', icon: 'bullhorn' },
                { id: 'digital-media', name: 'DIGITAL MEDIA', icon: 'image' },
                { id: 'pos-resources', name: 'POS & SYSTEM RESOURCES', icon: 'credit-card' },
                { id: 'customer-experience', name: 'CUSTOMER EXPERIENCE', icon: 'users' }
            ];
            
            // Initialize subfolders
            subFolders = {
            'brand-assets': [
                { id: 'logo-files', name: 'Logo Files', subfolders: ['Primary Logos', 'Secondary Marks', 'Logo Variations', 'Icons & Favicons'] },
                { id: 'brand-guidelines', name: 'Brand Guidelines', subfolders: ['Color Palette', 'Typography', 'Brand Voice & Messaging'] },
                { id: 'restaurant-identity', name: 'Restaurant Identity', subfolders: ['Exterior Photos', 'Interior Photos', 'Signage', 'Staff Uniforms'] }
            ],
            'menus': [
                { id: 'current-menus', name: 'Current Menus', subfolders: ['Main Menu', 'Beverage Menu', 'Kids Menu', 'Dessert Menu'] },
                { id: 'seasonal-menus', name: 'Seasonal Menus', subfolders: ['Spring', 'Summer', 'Fall', 'Winter'] },
                { id: 'specialty-menus', name: 'Specialty Menus', subfolders: ['Happy Hour', 'Brunch', 'Catering', 'Private Events'] },
                { id: 'digital-menu-files', name: 'Digital Menu Files', subfolders: ['PDF Menus', 'QR Code Menus', 'Online Ordering Menus'] },
                { id: 'menu-archives', name: 'Menu Archives', subfolders: ['2025', '2024', '2023'] }
            ],
            'menu-content': [
                { id: 'food-photography', name: 'Food Photography', subfolders: ['Appetizers', 'Main Courses', 'Desserts', 'Specials'] },
                { id: 'menu-design-files', name: 'Menu Design Files', subfolders: ['Templates', 'Menu Backgrounds', 'Layout Files'] },
                { id: 'menu-copy', name: 'Menu Copy', subfolders: ['Item Descriptions', 'Dietary Information', 'Ingredient Lists'] },
                { id: 'beverage-program', name: 'Beverage Program', subfolders: ['Cocktail Photos', 'Wine List Content', 'Beer Program'] }
            ],
            'marketing-materials': [
                { id: 'print-materials', name: 'Print Materials', subfolders: ['Flyers & Posters', 'Table Tents', 'Business Cards', 'Gift Cards'] },
                { id: 'digital-campaigns', name: 'Digital Campaigns', subfolders: ['Email Templates', 'Banner Ads', 'Promotional Graphics'] },
                { id: 'social-media-content', name: 'Social Media Content', subfolders: ['Facebook', 'Instagram', 'Twitter/X', 'TikTok', 'Content Calendar Templates'] },
                { id: 'loyalty-rewards', name: 'Loyalty & Rewards', subfolders: ['Program Graphics', 'Membership Materials'] },
                { id: 'seasonal-promotions', name: 'Seasonal Promotions', subfolders: ['Holiday Graphics', 'Seasonal Campaigns'] }
            ],
            'digital-media': [
                { id: 'photography', name: 'Photography', subfolders: ['Food Gallery', 'Ambiance & Atmosphere', 'Staff & Team', 'Events & Gatherings'] },
                { id: 'video-content', name: 'Video Content', subfolders: ['Promotional Videos', 'Behind-the-Scenes', 'Chef Interviews', 'Food Preparation'] },
                { id: 'audio', name: 'Audio', subfolders: ['Restaurant Playlists', 'On-Hold Music', 'Radio Spots'] },
                { id: 'stock-resources', name: 'Stock Resources', subfolders: ['Licensed Stock Photos', 'Purchased Templates', 'Font Files'] }
            ],
            'pos-resources': [
                { id: 'microsale-assets', name: 'MicroSale Assets', subfolders: ['Button Icons', 'Screen Backgrounds', 'Custom Receipt Templates'] },
                { id: 'digital-displays', name: 'Digital Displays', subfolders: ['Customer-Facing Display Content', 'Kitchen Display Graphics', 'Drive-thru Display Assets'] },
                { id: 'online-ordering', name: 'Online Ordering', subfolders: ['BiteHeist Menu Photos', 'Item Descriptions', 'Delivery Zone Maps'] },
                { id: 'qr-codes', name: 'QR Codes', subfolders: ['Menu QR Codes', 'Payment QR Codes', 'Feedback QR Codes'] }
            ],
            'customer-experience': [
                { id: 'website-content', name: 'Website Content', subfolders: ['Homepage Assets', 'About Us Content', 'Location & Hours', 'Photo Gallery'] },
                { id: 'customer-communication', name: 'Customer Communication', subfolders: ['Email Templates', 'SMS Templates', 'Feedback Forms'] },
                { id: 'digital-menus', name: 'Digital Menus', subfolders: ['Online Menu PDFs', 'QR Menu Design', 'Interactive Menu Content'] },
                { id: 'table-guest-touchpoints', name: 'Table/Guest Touchpoints', subfolders: ['Table Cards', 'Check Presenters', 'Guest Wifi Cards'] }
            ]
            };
            
            // Initialize asset types
            assetTypes = [
                { id: 'image', name: 'Image', extensions: ['jpg', 'png', 'webp'] },
                { id: 'document', name: 'Document', extensions: ['pdf', 'docx'] },
                { id: 'design', name: 'Design File', extensions: ['psd', 'ai', 'sketch'] },
                { id: 'video', name: 'Video', extensions: ['mp4', 'mov'] },
                { id: 'audio', name: 'Audio', extensions: ['mp3', 'wav'] }
            ];

            // Sample data for assets
            assets = [
                {
                    id: '1',
                    name: 'Primary Logo Full Color',
                    description: 'Main restaurant logo on white background',
                    type: 'image',
                    extension: 'png',
                    size: '2.4 MB',
                    dimensions: '2000 x 800 px',
                    path: '/BRAND ASSETS/Logo Files/Primary Logos/Primary_Logo_Full_Color.png',
                    folder: 'brand-assets',
                    subfolder: 'logo-files',
                    detailFolder: 'Primary Logos',
                    tags: ['logo', 'branding', 'primary'],
                    dateCreated: '2025-01-15',
                    dateModified: '2025-01-15',
                    thumbnail: 'https://via.placeholder.com/300/4F46E5/FFFFFF?text=LOGO',
                    createdBy: 'Brand Manager'
                },
                {
                    id: '2',
                    name: 'Menu Spring 2025',
                    description: 'Spring menu PDF for print and digital distribution',
                    type: 'document',
                    extension: 'pdf',
                    size: '3.8 MB',
                    path: '/MENUS/Seasonal Menus/Spring/Menu_Spring_2025.pdf',
                    folder: 'menus',
                    subfolder: 'seasonal-menus',
                    detailFolder: 'Spring',
                    tags: ['menu', 'spring', '2025', 'seasonal'],
                    dateCreated: '2025-03-01',
                    dateModified: '2025-03-05',
                    thumbnail: 'https://via.placeholder.com/300/DC2626/FFFFFF?text=PDF',
                    createdBy: 'Marketing Director'
                },
                {
                    id: '3',
                    name: 'Signature Burger Hero Shot',
                    description: 'High-res photograph of signature burger',
                    type: 'image',
                    extension: 'jpg',
                    size: '5.2 MB',
                    dimensions: '4000 x 3000 px',
                    path: '/MENU CONTENT/Food Photography/Main Courses/Signature_Burger_Hero.jpg',
                    folder: 'menu-content',
                    subfolder: 'food-photography',
                    detailFolder: 'Main Courses',
                    tags: ['food', 'burger', 'photography', 'hero image'],
                    dateCreated: '2025-02-10',
                    dateModified: '2025-02-10',
                    thumbnail: 'https://via.placeholder.com/300/065F46/FFFFFF?text=FOOD',
                    createdBy: 'Food Photographer'
                },
                {
                    id: '4',
                    name: 'Instagram Summer Promotion',
                    description: 'Promotional post for summer special menu',
                    type: 'image',
                    extension: 'jpg',
                    size: '1.8 MB',
                    dimensions: '1080 x 1080 px',
                    path: '/MARKETING MATERIALS/Social Media Content/Instagram/Summer_Promo_Post.jpg',
                    folder: 'marketing-materials',
                    subfolder: 'social-media-content',
                    detailFolder: 'Instagram',
                    tags: ['social media', 'instagram', 'summer', 'promotion'],
                    dateCreated: '2025-06-01',
                    dateModified: '2025-06-02',
                    thumbnail: 'https://via.placeholder.com/300/0284C7/FFFFFF?text=SOCIAL',
                    createdBy: 'Social Media Manager'
                },
                {
                    id: '5',
                    name: 'Chef Interview - Summer Menu',
                    description: 'Video interview with chef discussing summer menu items',
                    type: 'video',
                    extension: 'mp4',
                    size: '128 MB',
                    duration: '3:45',
                    path: '/DIGITAL MEDIA/Video Content/Chef Interviews/Chef_Summer_Menu_Interview.mp4',
                    folder: 'digital-media',
                    subfolder: 'video-content',
                    detailFolder: 'Chef Interviews',
                    tags: ['video', 'chef', 'interview', 'summer menu'],
                    dateCreated: '2025-05-15',
                    dateModified: '2025-05-18',
                    thumbnail: 'https://via.placeholder.com/300/7C3AED/FFFFFF?text=VIDEO',
                    createdBy: 'Content Producer'
                },
                {
                    id: '6',
                    name: 'POS Button Icons Set',
                    description: 'Full set of custom icons for MicroSale POS system',
                    type: 'design',
                    extension: 'ai',
                    size: '8.4 MB',
                    path: '/POS & SYSTEM RESOURCES/MicroSale Assets/Button Icons/POS_Button_Icons_Set.ai',
                    folder: 'pos-resources',
                    subfolder: 'microsale-assets',
                    detailFolder: 'Button Icons',
                    tags: ['pos', 'icons', 'microsale', 'buttons'],
                    dateCreated: '2025-01-30',
                    dateModified: '2025-02-05',
                    thumbnail: 'https://via.placeholder.com/300/EA580C/FFFFFF?text=ICONS',
                    createdBy: 'UI Designer'
                },
                {
                    id: '7',
                    name: 'Website Hero Banner',
                    description: 'Main hero image for restaurant website homepage',
                    type: 'image',
                    extension: 'jpg',
                    size: '4.6 MB',
                    dimensions: '2400 x 1200 px',
                    path: '/CUSTOMER EXPERIENCE/Website Content/Homepage Assets/Homepage_Hero_Banner.jpg',
                    folder: 'customer-experience',
                    subfolder: 'website-content',
                    detailFolder: 'Homepage Assets',
                    tags: ['website', 'hero', 'banner', 'homepage'],
                    dateCreated: '2025-04-10',
                    dateModified: '2025-04-12',
                    thumbnail: 'https://via.placeholder.com/300/2563EB/FFFFFF?text=WEB',
                    createdBy: 'Web Designer'
                },
                {
                    id: '8',
                    name: 'Brand Style Guide 2025',
                    description: 'Comprehensive brand guidelines document',
                    type: 'document',
                    extension: 'pdf',
                    size: '12.2 MB',
                    path: '/BRAND ASSETS/Brand Guidelines/Brand_Style_Guide_2025.pdf',
                    folder: 'brand-assets',
                    subfolder: 'brand-guidelines',
                    detailFolder: '',
                    tags: ['brand', 'guidelines', 'style guide'],
                    dateCreated: '2025-01-05',
                    dateModified: '2025-01-10',
                    thumbnail: 'https://via.placeholder.com/300/DC2626/FFFFFF?text=PDF',
                    createdBy: 'Brand Director'
                }
            ];

            // Load saved assets from localStorage
            loadSavedAssets();
            
            // Render main folders
            renderMainFolders();
            
            // Fill folder selects in upload modal
            populateFolderSelects();
            
            // Add event listeners
            setupEventListeners();
            
            // Initial render
            updateView();
        }

        // Load saved assets from localStorage
        function loadSavedAssets() {
            try {
                const savedAssets = localStorage.getItem('restaurantDamAssets');
                if (savedAssets) {
                    assets = JSON.parse(savedAssets);
                } else {
                    // If no saved assets, save the initial ones
                    localStorage.setItem('restaurantDamAssets', JSON.stringify(assets));
                }
            } catch (error) {
                console.error('Error loading saved assets:', error);
            }
        }

        // Save assets to localStorage
        function saveAssets() {
            try {
                localStorage.setItem('restaurantDamAssets', JSON.stringify(assets));
                return true;
            } catch (error) {
                console.error('Error saving assets:', error);
                return false;
            }
        }

        // Render main folders
        function renderMainFolders() {
            elements.mainFoldersList.innerHTML = '';
            
            mainFolders.forEach(folder => {
                const li = document.createElement('li');
                const isActive = state.activeFolder === folder.id;
                
                li.innerHTML = `
                    <button
                        class="folder-button flex items-center px-3 py-2 text-sm rounded-md w-full ${
                            isActive ? 'folder-active font-medium' : 'text-gray-700 hover:bg-gray-100'
                        }"
                        data-folder="${folder.id}"
                    >
                        <span class="mr-2 ${isActive ? 'text-blue-600' : 'text-gray-500'}">
                            ${renderFolderIcon(folder.icon)}
                        </span>
                        <span class="truncate">${folder.name}</span>
                    </button>
                `;
                
                if (folder.id === state.activeFolder) {
                    // Render subfolders indented
                    const subfolderList = document.createElement('ul');
                    subfolderList.className = 'ml-6 mt-1 space-y-1';
                    
                    subFolders[folder.id]?.forEach(subfolder => {
                        const subLi = document.createElement('li');
                        const isSubActive = state.activeSubfolder === subfolder.id;
                        
                        subLi.innerHTML = `
                            <button
                                class="folder-button flex items-center px-3 py-1.5 text-sm rounded-md w-full ${
                                    isSubActive ? 'folder-active font-medium' : 'text-gray-700 hover:bg-gray-100'
                                }"
                                data-subfolder="${subfolder.id}"
                            >
                                <span class="mr-2 ${isSubActive ? 'text-blue-600' : 'text-gray-500'}">
                                    <svg class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1H8a3 3 0 00-3 3v1.5a1.5 1.5 0 01-3 0V6z" clip-rule="evenodd" />
                                        <path d="M6 12A2 2 0 018 10h8a2 2 0 012 2v5a2 2 0 01-2 2H8a2 2 0 01-2-2v-5z" />
                                    </svg>
                                </span>
                                <span class="truncate">${subfolder.name}</span>
                            </button>
                        `;
                        
                        if (subfolder.id === state.activeSubfolder && subfolder.subfolders && subfolder.subfolders.length > 0) {
                            // Render detail folders with more indentation
                            const detailList = document.createElement('ul');
                            detailList.className = 'ml-6 mt-1 space-y-1';
                            
                            subfolder.subfolders.forEach(detail => {
                                const detailLi = document.createElement('li');
                                const isDetailActive = state.activeDetailFolder === detail;
                                
                                detailLi.innerHTML = `
                                    <button
                                        class="folder-button flex items-center px-2 py-1 text-xs rounded-md w-full ${
                                            isDetailActive ? 'folder-active font-medium' : 'text-gray-700 hover:bg-gray-100'
                                        }"
                                        data-detail-folder="${detail}"
                                    >
                                        <span class="mr-2 ${isDetailActive ? 'text-blue-600' : 'text-gray-500'}">
                                            <svg class="h-3 w-3" viewBox="0 0 20 20" fill="currentColor">
                                                <path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1H8a3 3 0 00-3 3v1.5a1.5 1.5 0 01-3 0V6z" clip-rule="evenodd" />
                                                <path d="M6 12A2 2 0 018 10h8a2 2 0 012 2v5a2 2 0 01-2 2H8a2 2 0 01-2-2v-5z" />
                                            </svg>
                                        </span>
                                        <span class="truncate">${detail}</span>
                                    </button>
                                `;
                                
                                detailList.appendChild(detailLi);
                                
                                // Add click event listener for detail folder
                                const detailButton = detailLi.querySelector('button');
                                detailButton.addEventListener('click', () => {
                                    state.activeDetailFolder = detail;
                                    state.selectedAssets = [];
                                    updateView();
                                });
                            });
                            
                            subLi.appendChild(detailList);
                        }
                        
                        subfolderList.appendChild(subLi);
                        
                        // Add click event listener for subfolder
                        const subButton = subLi.querySelector('button[data-subfolder]');
                        subButton.addEventListener('click', () => {
                            state.activeSubfolder = subfolder.id;
                            state.activeDetailFolder = null;
                            state.selectedAssets = [];
                            updateView();
                        });
                    });
                    
                    li.appendChild(subfolderList);
                }
                
                elements.mainFoldersList.appendChild(li);
                
                // Add click event listener for main folder
                const button = li.querySelector('button[data-folder]');
                button.addEventListener('click', () => {
                    state.activeFolder = folder.id;
                    state.activeSubfolder = null;
                    state.activeDetailFolder = null;
                    state.selectedAssets = [];
                    updateView();
                });
            });
        }

        // Update breadcrumb navigation
        function updateBreadcrumb() {
            // Reset breadcrumb
            elements.breadcrumbMain.classList.add('hidden');
            elements.breadcrumbSub.classList.add('hidden');
            elements.breadcrumbDetail.classList.add('hidden');
            elements.breadcrumbSeparator1.classList.add('hidden');
            elements.breadcrumbSeparator2.classList.add('hidden');
            elements.breadcrumbSeparator3.classList.add('hidden');
            
            // Update breadcrumb based on active folders
            if (state.activeFolder) {
                const mainFolder = mainFolders.find(f => f.id === state.activeFolder);
                elements.breadcrumbMain.textContent = mainFolder.name;
                elements.breadcrumbMain.classList.remove('hidden');
                elements.breadcrumbSeparator1.classList.remove('hidden');
                
                elements.breadcrumbMain.setAttribute('data-folder', state.activeFolder);
                
                if (state.activeSubfolder) {
                    const subfolder = subFolders[state.activeFolder]?.find(sf => sf.id === state.activeSubfolder);
                    elements.breadcrumbSub.textContent = subfolder.name;
                    elements.breadcrumbSub.classList.remove('hidden');
                    elements.breadcrumbSeparator2.classList.remove('hidden');
                    
                    elements.breadcrumbSub.setAttribute('data-subfolder', state.activeSubfolder);
                    
                    if (state.activeDetailFolder) {
                        elements.breadcrumbDetail.textContent = state.activeDetailFolder;
                        elements.breadcrumbDetail.classList.remove('hidden');
                        elements.breadcrumbSeparator3.classList.remove('hidden');
                    }
                }
            }
        }

        // Get filtered assets based on current state
        function getFilteredAssets() {
            // Start with filtering by folder structure
            let filtered = [...assets];
            
            if (state.activeFolder) {
                filtered = filtered.filter(asset => asset.folder === state.activeFolder);
                
                if (state.activeSubfolder) {
                    filtered = filtered.filter(asset => asset.subfolder === state.activeSubfolder);
                    
                    if (state.activeDetailFolder) {
                        filtered = filtered.filter(asset => asset.detailFolder === state.activeDetailFolder);
                    }
                }
            }
            
            // Then filter by search term
            if (state.searchTerm) {
                const search = state.searchTerm.toLowerCase();
                filtered = filtered.filter(asset => 
                    asset.name.toLowerCase().includes(search) ||
                    (asset.description && asset.description.toLowerCase().includes(search)) ||
                    asset.tags.some(tag => tag.toLowerCase().includes(search))
                );
            }
            
            // Finally sort the results
            filtered.sort((a, b) => {
                if (state.sortBy === 'date') {
                    return state.sortOrder === 'asc' 
                        ? new Date(a.dateModified) - new Date(b.dateModified)
                        : new Date(b.dateModified) - new Date(a.dateModified);
                } else if (state.sortBy === 'name') {
                    return state.sortOrder === 'asc'
                        ? a.name.localeCompare(b.name)
                        : b.name.localeCompare(a.name);
                } else if (state.sortBy === 'type') {
                    return state.sortOrder === 'asc'
                        ? a.type.localeCompare(b.type)
                        : b.type.localeCompare(a.type);
                }
                return 0;
            });
            
            return filtered;
        }

        // Render assets in grid view
        function renderGridView(filteredAssets) {
            elements.gridView.innerHTML = '';
            
            filteredAssets.forEach(asset => {
                const div = document.createElement('div');
                div.className = `asset-card bg-white rounded-lg shadow-sm border overflow-hidden ${
                    state.selectedAssets.includes(asset.id) ? 'ring-2 ring-blue-500 border-blue-500' : 'border-gray-200'
                }`;
                
                div.innerHTML = `
                    <div class="p-1 flex justify-end">
                        <input
                            type="checkbox"
                            class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
                            data-asset-id="${asset.id}"
                            ${state.selectedAssets.includes(asset.id) ? 'checked' : ''}
                        >
                    </div>
                    <div class="flex justify-center p-4 bg-gray-50 h-40 cursor-pointer view-asset" data-asset-id="${asset.id}">
                        <img 
                            src="${asset.thumbnail}" 
                            alt="${asset.name}" 
                            class="h-full object-contain"
                        >
                    </div>
                    <div class="p-4">
                        <div class="flex items-center mb-2">
                            ${renderFileTypeIcon(asset.type, asset.extension)}
                            <span class="ml-2 uppercase text-xs font-bold text-gray-500">${asset.extension}</span>
                        </div>
                        <h3 class="text-sm font-medium text-gray-900 truncate cursor-pointer view-asset" data-asset-id="${asset.id}" title="${asset.name}">
                            ${asset.name}
                        </h3>
                        <p class="text-xs text-gray-500 mt-1 truncate" title="${asset.description || ''}">
                            ${asset.description || ''}
                        </p>
                        <div class="mt-3 flex flex-wrap gap-1">
                            ${asset.tags.slice(0, 2).map(tag => `
                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800">
                                    ${tag}
                                </span>
                            `).join('')}
                            ${asset.tags.length > 2 ? `
                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800">
                                    +${asset.tags.length - 2}
                                </span>
                            ` : ''}
                        </div>
                    </div>
                    <div class="border-t border-gray-200 px-4 py-3 bg-gray-50 flex justify-between items-center">
                        <div class="text-xs text-gray-500">
                            ${new Date(asset.dateModified).toLocaleDateString()}
                        </div>
                        <button 
                            class="text-sm text-blue-600 hover:text-blue-800 view-asset"
                            data-asset-id="${asset.id}"
                        >
                            View
                        </button>
                    </div>
                `;
                
                elements.gridView.appendChild(div);
                
                // Add event listeners
                const checkbox = div.querySelector('input[type="checkbox"]');
                checkbox.addEventListener('change', (e) => {
                    toggleAssetSelection(asset.id);
                });
                
                const viewElements = div.querySelectorAll('.view-asset');
                viewElements.forEach(el => {
                    el.addEventListener('click', () => {
                        viewAssetDetails(asset.id);
                    });
                });
            });
        }

        // Render assets in list view
        function renderListView(filteredAssets) {
            elements.assetList.innerHTML = '';
            
            filteredAssets.forEach(asset => {
                const tr = document.createElement('tr');
                tr.className = state.selectedAssets.includes(asset.id) ? 'bg-blue-50' : 'hover:bg-gray-50';
                
                tr.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <input
                            type="checkbox"
                            class="h-4 w-4 text-blue-600 border-gray-300 rounded"
                            data-asset-id="${asset.id}"
                            ${state.selectedAssets.includes(asset.id) ? 'checked' : ''}
                        >
                    </td>
                    <td class="px-6 py-4">
                        <div class="flex items-center">
                            <div class="flex-shrink-0 h-10 w-10 rounded bg-gray-100 flex items-center justify-center cursor-pointer view-asset" data-asset-id="${asset.id}">
                                <img 
                                    src="${asset.thumbnail}" 
                                    alt="" 
                                    class="h-8 w-8 object-contain"
                                >
                            </div>
                            <div class="ml-4">
                                <div class="text-sm font-medium text-gray-900 cursor-pointer view-asset" data-asset-id="${asset.id}">${asset.name}</div>
                                <div class="text-sm text-gray-500 truncate max-w-xs">${asset.description || ''}</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            ${renderFileTypeIcon(asset.type, asset.extension)}
                            <span class="ml-2 text-sm text-gray-900">${asset.type}</span>
                            <span class="ml-1 text-xs text-gray-500">(.${asset.extension})</span>
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <div class="flex flex-wrap gap-1">
                            ${asset.tags.map(tag => `
                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800">
                                    ${tag}
                                </span>
                            `).join('')}
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        ${new Date(asset.dateModified).toLocaleDateString()}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <button 
                            class="text-blue-600 hover:text-blue-900 view-asset"
                            data-asset-id="${asset.id}"
                        >
                            View
                        </button>
                    </td>
                `;
                
                elements.assetList.appendChild(tr);
                
                // Add event listeners
                const checkbox = tr.querySelector('input[type="checkbox"]');
                checkbox.addEventListener('change', () => {
                    toggleAssetSelection(asset.id);
                });
                
                const viewElements = tr.querySelectorAll('.view-asset');
                viewElements.forEach(el => {
                    el.addEventListener('click', () => {
                        viewAssetDetails(asset.id);
                    });
                });
            });
        }

        // Update view based on current state
        function updateView() {
            // Render folder navigation
            renderMainFolders();
            updateBreadcrumb();
            
            // Get filtered assets
            const filteredAssets = getFilteredAssets();
            
            // Update asset count
            elements.assetCount.textContent = `${filteredAssets.length} asset${filteredAssets.length === 1 ? '' : 's'}`;
            
            // Update empty state
            if (filteredAssets.length === 0) {
                elements.emptyState.classList.remove('hidden');
                elements.gridView.classList.add('hidden');
                elements.listView.classList.add('hidden');
                
                // Update empty state message
                if (state.searchTerm) {
                    elements.emptyStateMessage.textContent = 'Try a different search term';
                } else {
                    elements.emptyStateMessage.textContent = 'Get started by adding assets to this folder';
                }
            } else {
                elements.emptyState.classList.add('hidden');
                
                // Render assets based on view mode
                if (state.viewMode === 'grid') {
                    elements.gridView.classList.remove('hidden');
                    elements.listView.classList.add('hidden');
                    renderGridView(filteredAssets);
                } else {
                    elements.gridView.classList.add('hidden');
                    elements.listView.classList.remove('hidden');
                    renderListView(filteredAssets);
                }
            }
            
            // Update delete button state
            updateDeleteButton();
            
            // Update select all checkbox state
            updateSelectAllCheckbox(filteredAssets);
        }

        // Toggle asset selection
        function toggleAssetSelection(id) {
            if (state.selectedAssets.includes(id)) {
                state.selectedAssets = state.selectedAssets.filter(assetId => assetId !== id);
            } else {
                state.selectedAssets.push(id);
            }
            
            updateView();
        }

        // Update delete button state
        function updateDeleteButton() {
            if (state.selectedAssets.length > 0) {
                elements.deleteBtn.classList.remove('bg-gray-200', 'text-gray-400', 'cursor-not-allowed');
                elements.deleteBtn.classList.add('bg-red-600', 'text-white', 'hover:bg-red-700');
                elements.deleteBtn.disabled = false;
            } else {
                elements.deleteBtn.classList.add('bg-gray-200', 'text-gray-400', 'cursor-not-allowed');
                elements.deleteBtn.classList.remove('bg-red-600', 'text-white', 'hover:bg-red-700');
                elements.deleteBtn.disabled = true;
            }
        }

        // Update select all checkbox state
        function updateSelectAllCheckbox(filteredAssets) {
            if (!elements.selectAll) return;
            
            if (filteredAssets.length === 0) {
                elements.selectAll.checked = false;
                elements.selectAll.disabled = true;
            } else {
                elements.selectAll.disabled = false;
                
                if (state.selectedAssets.length === filteredAssets.length) {
                    elements.selectAll.checked = true;
                    elements.selectAll.indeterminate = false;
                } else if (state.selectedAssets.length > 0) {
                    elements.selectAll.checked = false;
                    elements.selectAll.indeterminate = true;
                } else {
                    elements.selectAll.checked = false;
                    elements.selectAll.indeterminate = false;
                }
            }
        }

        // Delete selected assets
        function deleteAssets() {
            if (state.selectedAssets.length === 0) return;
            
            // Filter out selected assets
            assets = assets.filter(asset => !state.selectedAssets.includes(asset.id));
            
            // Save to localStorage
            const saved = saveAssets();
            
            // Show status message
            if (saved) {
                showStatus(`${state.selectedAssets.length} asset(s) deleted successfully`);
            } else {
                showStatus('Error saving changes', 'error');
            }
            
            // Clear selection
            state.selectedAssets = [];
            
            // Update view
            updateView();
        }

        // View asset details
        function viewAssetDetails(id) {
            const asset = assets.find(a => a.id === id);
            if (!asset) return;
            
            state.currentAsset = asset;
            
            // Fill modal content
            elements.detailThumbnail.src = asset.thumbnail;
            elements.detailThumbnail.alt = asset.name;
            elements.detailPath.textContent = asset.path;
            elements.detailFullPath.textContent = asset.path;
            elements.detailTypeIcon.innerHTML = renderFileTypeIcon(asset.type, asset.extension);
            elements.detailName.textContent = asset.name;
            elements.detailFileInfo.textContent = `${asset.type.charAt(0).toUpperCase() + asset.type.slice(1)} • .${asset.extension} • ${asset.size}`;
            elements.detailDescription.textContent = asset.description || 'No description provided';
            
            // Tags
            elements.detailTags.innerHTML = '';
            if (asset.tags && asset.tags.length > 0) {
                asset.tags.forEach(tag => {
                    const span = document.createElement('span');
                    span.className = 'inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800';
                    span.textContent = tag;
                    elements.detailTags.appendChild(span);
                });
            } else {
                const span = document.createElement('span');
                span.className = 'text-sm text-gray-500';
                span.textContent = 'No tags';
                elements.detailTags.appendChild(span);
            }
            
            // Dates
            elements.detailCreated.textContent = new Date(asset.dateCreated).toLocaleDateString();
            elements.detailModified.textContent = new Date(asset.dateModified).toLocaleDateString();
            
            // Creator
            elements.detailCreator.textContent = asset.createdBy;
            
            // Dimensions (for images)
            if (asset.dimensions) {
                elements.detailDimensionsContainer.classList.remove('hidden');
                elements.detailDimensions.textContent = asset.dimensions;
            } else {
                elements.detailDimensionsContainer.classList.add('hidden');
            }
            
            // Duration (for video/audio)
            if (asset.duration) {
                elements.detailDurationContainer.classList.remove('hidden');
                elements.detailDuration.textContent = asset.duration;
            } else {
                elements.detailDurationContainer.classList.add('hidden');
            }
            
            // Location
            elements.detailLocation.innerHTML = '';
            
            // Main folder
            const mainFolderSpan = document.createElement('span');
            mainFolderSpan.textContent = mainFolders.find(f => f.id === asset.folder)?.name || '-';
            elements.detailLocation.appendChild(mainFolderSpan);
            
            // Arrow
            const arrow1 = document.createElement('svg');
            arrow1.className = 'h-4 w-4 text-gray-400';
            arrow1.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />';
            arrow1.setAttribute('fill', 'none');
            arrow1.setAttribute('viewBox', '0 0 24 24');
            arrow1.setAttribute('stroke', 'currentColor');
            elements.detailLocation.appendChild(arrow1);
            
            // Subfolder
            const subfolderSpan = document.createElement('span');
            subfolderSpan.textContent = subFolders[asset.folder]?.find(sf => sf.id === asset.subfolder)?.name || '-';
            elements.detailLocation.appendChild(subfolderSpan);
            
            // Detail folder (if exists)
            if (asset.detailFolder) {
                const arrow2 = document.createElement('svg');
                arrow2.className = 'h-4 w-4 text-gray-400';
                arrow2.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />';
                arrow2.setAttribute('fill', 'none');
                arrow2.setAttribute('viewBox', '0 0 24 24');
                arrow2.setAttribute('stroke', 'currentColor');
                elements.detailLocation.appendChild(arrow2);
                
                const detailFolderSpan = document.createElement('span');
                detailFolderSpan.textContent = asset.detailFolder;
                elements.detailLocation.appendChild(detailFolderSpan);
            }
            
            // Show modal
            elements.assetDetailModal.classList.add('active');
        }

        // Close asset detail modal
        function closeAssetDetail() {
            elements.assetDetailModal.classList.remove('active');
            state.currentAsset = null;
        }

        // Populate folder selects in upload modal
        function populateFolderSelects() {
            // Main folders
            elements.folderSelect.innerHTML = '';
            mainFolders.forEach(folder => {
                const option = document.createElement('option');
                option.value = folder.id;
                option.textContent = folder.name;
                elements.folderSelect.appendChild(option);
            });
            
            // Update subfolder select when main folder changes
            elements.folderSelect.addEventListener('change', () => {
                const folderId = elements.folderSelect.value;
                updateSubfolderSelect(folderId);
            });
            
            // Update detail folder select when subfolder changes
            elements.subfolderSelect.addEventListener('change', () => {
                const folderId = elements.folderSelect.value;
                const subfolderId = elements.subfolderSelect.value;
                updateDetailFolderSelect(folderId, subfolderId);
            });
        }

        // Update subfolder select based on selected main folder
        function updateSubfolderSelect(folderId) {
            elements.subfolderSelect.innerHTML = '<option value="">Select subfolder</option>';
            
            if (!folderId || !subFolders[folderId] || subFolders[folderId].length === 0) {
                elements.subfolderSelect.disabled = true;
                elements.detailFolderSelect.disabled = true;
                elements.detailFolderSelect.innerHTML = '<option value="">Select detail folder</option>';
                return;
            }
            
            elements.subfolderSelect.disabled = false;
            
            subFolders[folderId].forEach(subfolder => {
                const option = document.createElement('option');
                option.value = subfolder.id;
                option.textContent = subfolder.name;
                elements.subfolderSelect.appendChild(option);
            });
            
            // Reset detail folder select
            elements.detailFolderSelect.innerHTML = '<option value="">Select detail folder</option>';
            elements.detailFolderSelect.disabled = true;
        }

        // Update detail folder select based on selected subfolder
        function updateDetailFolderSelect(folderId, subfolderId) {
            elements.detailFolderSelect.innerHTML = '<option value="">Select detail folder</option>';
            
            if (!folderId || !subfolderId) {
                elements.detailFolderSelect.disabled = true;
                return;
            }
            
            const subfolder = subFolders[folderId]?.find(sf => sf.id === subfolderId);
            
            if (!subfolder || !subfolder.subfolders || subfolder.subfolders.length === 0) {
                elements.detailFolderSelect.disabled = true;
                return;
            }
            
            elements.detailFolderSelect.disabled = false;
            
            subfolder.subfolders.forEach(detailFolder => {
                const option = document.createElement('option');
                option.value = detailFolder;
                option.textContent = detailFolder;
                elements.detailFolderSelect.appendChild(option);
            });
        }

        // Show upload modal
        function showUploadModal() {
            // Reset form
            elements.assetName.value = '';
            elements.assetDescription.value = '';
            elements.assetType.value = 'image';
            elements.assetTags.value = '';
            elements.assetPath.value = '';
            
            // Set current folder as default
            if (state.activeFolder) {
                elements.folderSelect.value = state.activeFolder;
                updateSubfolderSelect(state.activeFolder);
                
                if (state.activeSubfolder) {
                    elements.subfolderSelect.value = state.activeSubfolder;
                    updateDetailFolderSelect(state.activeFolder, state.activeSubfolder);
                    
                    if (state.activeDetailFolder) {
                        elements.detailFolderSelect.value = state.activeDetailFolder;
                    }
                }
            } else {
                elements.folderSelect.selectedIndex = 0;
                updateSubfolderSelect(elements.folderSelect.value);
            }
            
            // Hide status
            if (elements.uploadStatus) {
                elements.uploadStatus.classList.add('hidden');
            }
            
            // Show modal
            elements.uploadModal.classList.add('active');
        }

        // Close upload modal
        function closeUploadModal() {
            elements.uploadModal.classList.remove('active');
        }

        // Upload a new asset
        function uploadAsset() {
            // Validate required fields
            if (!elements.assetName.value || !elements.assetPath.value) {
                showUploadStatus('Please provide both a name and file path', 'error');
                return;
            }
            
            // Get folder info
            const folder = elements.folderSelect.value;
            const subfolder = elements.subfolderSelect.value;
            const detailFolder = elements.detailFolderSelect.value;
            
            // Extract filename and extension from path
            const filePath = elements.assetPath.value;
            const filename = filePath.split(/[\/\\]/).pop();
            const extension = filename.split('.').pop().toLowerCase();
            
            // Create new asset
            const newId = (Math.max(...assets.map(a => parseInt(a.id) || 0)) + 1).toString();
            
            // Process tags
            const tags = elements.assetTags.value 
                ? elements.assetTags.value.split(',').map(tag => tag.trim()) 
                : [];
            
            // Get thumbnail based on type
            const type = elements.assetType.value;
            let thumbnail;
            
            switch(type) {
                case 'image':
                    thumbnail = 'https://via.placeholder.com/300/4F46E5/FFFFFF?text=IMG';
                    break;
                case 'video':
                    thumbnail = 'https://via.placeholder.com/300/7C3AED/FFFFFF?text=VID';
                    break;
                case 'document':
                    thumbnail = 'https://via.placeholder.com/300/DC2626/FFFFFF?text=DOC';
                    break;
                case 'audio':
                    thumbnail = 'https://via.placeholder.com/300/EA580C/FFFFFF?text=AUD';
                    break;
                case 'design':
                    thumbnail = 'https://via.placeholder.com/300/059669/FFFFFF?text=DESIGN';
                    break;
                default:
                    thumbnail = 'https://via.placeholder.com/300/6B7280/FFFFFF?text=FILE';
            }
            
            // Construct full path
            const folderName = mainFolders.find(f => f.id === folder)?.name || '';
            const subfolderName = subFolders[folder]?.find(sf => sf.id === subfolder)?.name || '';
            const fullPath = `/${folderName}/${subfolderName}${detailFolder ? `/${detailFolder}` : ''}/${filename}`;
            
            // Create asset object
            const newAsset = {
                id: newId,
                name: elements.assetName.value,
                description: elements.assetDescription.value,
                type: type,
                extension: extension,
                size: '0 MB',
                path: fullPath,
                folder: folder,
                subfolder: subfolder,
                detailFolder: detailFolder,
                tags: tags,
                dateCreated: new Date().toISOString().split('T')[0],
                dateModified: new Date().toISOString().split('T')[0],
                thumbnail: thumbnail,
                createdBy: 'Current User'
            };
            
            // Add dimensions if it's an image
            if (type === 'image') {
                newAsset.dimensions = '1920 x 1080 px';
            }
            
            // Add duration if it's a video or audio
            if (type === 'video' || type === 'audio') {
                newAsset.duration = '0:00';
            }
            
            // Add to assets array
            assets.push(newAsset);
            
            // Save to localStorage
            const saved = saveAssets();
            
            if (saved) {
                showStatus(`Asset "${newAsset.name}" has been added successfully`);
                closeUploadModal();
                
                // Navigate to the new asset location
                state.activeFolder = folder;
                state.activeSubfolder = subfolder;
                state.activeDetailFolder = detailFolder;
                
                // Update view
                updateView();
            } else {
                showUploadStatus('Error saving asset', 'error');
            }
        }

        // Show status message in the main UI
        function showStatus(message, type = 'success') {
            elements.statusMessage.textContent = message;
            
            if (type === 'error') {
                elements.statusMessage.classList.remove('bg-green-600');
                elements.statusMessage.classList.add('bg-red-600');
            } else {
                elements.statusMessage.classList.remove('bg-red-600');
                elements.statusMessage.classList.add('bg-green-600');
            }
            
            elements.statusMessage.classList.remove('hidden');
            
            // Hide after 3 seconds
            setTimeout(() => {
                elements.statusMessage.classList.add('hidden');
            }, 3000);
        }

        // Show status message in the upload modal
        function showUploadStatus(message, type = 'success') {
            if (!elements.uploadStatus) return;
            
            elements.uploadStatus.textContent = message;
            
            if (type === 'error') {
                elements.uploadStatus.classList.remove('bg-green-50', 'text-green-700', 'border-green-200', 'bg-blue-50', 'text-blue-700', 'border-blue-200');
                elements.uploadStatus.classList.add('bg-red-50', 'text-red-700', 'border', 'border-red-200');
            } else if (type === 'info') {
                elements.uploadStatus.classList.remove('bg-green-50', 'text-green-700', 'border-green-200', 'bg-red-50', 'text-red-700', 'border-red-200');
                elements.uploadStatus.classList.add('bg-blue-50', 'text-blue-700', 'border', 'border-blue-200');
            } else {
                elements.uploadStatus.classList.remove('bg-red-50', 'text-red-700', 'border-red-200', 'bg-blue-50', 'text-blue-700', 'border-blue-200');
                elements.uploadStatus.classList.add('bg-green-50', 'text-green-700', 'border', 'border-green-200');
            }
            
            elements.uploadStatus.classList.remove('hidden');
        }

        // Helper function to render folder icon
        function renderFolderIcon(iconName) {
            switch(iconName) {
                case 'palette':
                    return `
                        <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M4 2a2 2 0 00-2 2v11a3 3 0 106 0V4a2 2 0 00-2-2H4zm1 14a1 1 0 100-2 1 1 0 000 2zm5-1.757l4.9-4.9a2 2 0 000-2.828L13.485 5.1a2 2 0 00-2.828 0L10 5.757v8.486zM16 18H9.071l6-6H16a2 2 0 012 2v2a2 2 0 01-2 2z" clip-rule="evenodd" />
                        </svg>
                    `;
                case 'utensils':
                    return `
                        <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                        </svg>
                    `;
                case 'camera':
                    return `
                        <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                    `;
                case 'bullhorn':
                    return `
                        <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z" />
                        </svg>
                    `;
                case 'image':
                    return `
                        <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                    `;
                case 'credit-card':
                    return `
                        <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" />
                        </svg>
                    `;
                case 'users':
                    return `
                        <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                        </svg>
                    `;
                default:
                    return `
                        <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1H8a3 3 0 00-3 3v1.5a1.5 1.5 0 01-3 0V6z" clip-rule="evenodd" />
                            <path d="M6 12A2 2 0 018 10h8a2 2 0 012 2v5a2 2 0 01-2 2H8a2 2 0 01-2-2v-5z" />
                        </svg>
                    `;
            }
        }

        // Helper function to render file type icon
        function renderFileTypeIcon(fileType, extension) {
            switch(fileType) {
                case 'image':
                    return `
                        <svg class="h-8 w-8 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                    `;
                case 'document':
                    return `
                        <svg class="h-8 w-8 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
                        </svg>
                    `;
                case 'video':
                    return `
                        <svg class="h-8 w-8 text-purple-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
                        </svg>
                    `;
                case 'audio':
                    return `
                        <svg class="h-8 w-8 text-orange-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3" />
                        </svg>
                    `;
                case 'design':
                    return `
                        <svg class="h-8 w-8 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" />
                        </svg>
                    `;
                default:
                    return `
                        <svg class="h-8 w-8 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                        </svg>
                    `;
            }
        }

        // Setup event listeners
        function setupEventListeners() {
            // View mode switcher
            elements.gridViewBtn.addEventListener('click', () => {
                state.viewMode = 'grid';
                elements.gridViewBtn.classList.add('bg-gray-100', 'text-gray-800');
                elements.gridViewBtn.classList.remove('text-gray-600');
                elements.listViewBtn.classList.remove('bg-gray-100', 'text-gray-800');
                elements.listViewBtn.classList.add('text-gray-600');
                updateView();
            });
            
            elements.listViewBtn.addEventListener('click', () => {
                state.viewMode = 'list';
                elements.listViewBtn.classList.add('bg-gray-100', 'text-gray-800');
                elements.listViewBtn.classList.remove('text-gray-600');
                elements.gridViewBtn.classList.remove('bg-gray-100', 'text-gray-800');
                elements.gridViewBtn.classList.add('text-gray-600');
                updateView();
            });
            
            // Sort controls
            elements.sortBySelect.addEventListener('change', () => {
                state.sortBy = elements.sortBySelect.value;
                updateView();
            });
            
            elements.sortOrderBtn.addEventListener('click', () => {
                state.sortOrder = state.sortOrder === 'asc' ? 'desc' : 'asc';
                
                if (state.sortOrder === 'asc') {
                    elements.sortOrderBtn.innerHTML = `
                        <svg class="h-5 w-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12" />
                        </svg>
                    `;
                } else {
                    elements.sortOrderBtn.innerHTML = `
                        <svg class="h-5 w-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4" />
                        </svg>
                    `;
                }
                
                updateView();
            });
            
            // Delete button
            elements.deleteBtn.addEventListener('click', () => {
                if (!elements.deleteBtn.disabled) {
                    deleteAssets();
                }
            });
            
            // Search input
            elements.searchInput.addEventListener('input', () => {
                state.searchTerm = elements.searchInput.value;
                updateView();
            });
            
            // Upload buttons
            elements.uploadBtn.addEventListener('click', showUploadModal);
            elements.emptyUploadBtn.addEventListener('click', showUploadModal);
            
            // Upload modal buttons
            elements.confirmUploadBtn.addEventListener('click', uploadAsset);
            elements.cancelUploadBtn.addEventListener('click', closeUploadModal);
            
            // Browse button (simulated)
            elements.browseBtn.addEventListener('click', () => {
                showUploadStatus('This would open a file browser in a real application', 'info');
            });
            
            // Asset detail modal close button
            elements.closeDetailBtn.addEventListener('click', closeAssetDetail);
            
            // Select all checkbox
            if (elements.selectAll) {
                elements.selectAll.addEventListener('change', () => {
                    const filteredAssets = getFilteredAssets();
                    
                    if (elements.selectAll.checked) {
                        state.selectedAssets = filteredAssets.map(asset => asset.id);
                    } else {
                        state.selectedAssets = [];
                    }
                    
                    updateView();
                });
            }
            
            // Breadcrumb navigation
            elements.breadcrumbAll.addEventListener('click', (e) => {
                e.preventDefault();
                state.activeFolder = null;
                state.activeSubfolder = null;
                state.activeDetailFolder = null;
                updateView();
            });
            
            elements.breadcrumbMain.addEventListener('click', (e) => {
                e.preventDefault();
                const folderId = elements.breadcrumbMain.getAttribute('data-folder');
                if (folderId) {
                    state.activeFolder = folderId;
                    state.activeSubfolder = null;
                    state.activeDetailFolder = null;
                    updateView();
                }
            });
            
            elements.breadcrumbSub.addEventListener('click', (e) => {
                e.preventDefault();
                const subfolderId = elements.breadcrumbSub.getAttribute('data-subfolder');
                if (subfolderId) {
                    state.activeSubfolder = subfolderId;
                    state.activeDetailFolder = null;
                    updateView();
                }
            });
            
            // Close modals when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target === elements.uploadModal) {
                    closeUploadModal();
                }
                
                if (e.target === elements.assetDetailModal) {
                    closeAssetDetail();
                }
            });
        }

        // Initialize the application
        init();
    </script>
</body>
</html><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restaurant Digital Asset Manager</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 50;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }
        
        .modal.active {
            display: flex;
        }
        
        .folder-nav {
            overflow-y: auto;
            max-height: calc(100vh - 64px);
        }
        
        .asset-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
        }
        
        .truncate-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .folder-active {
            background-color: #EFF6FF;
            color: #2563EB;
            border-left: 3px solid #2563EB;
        }
        
        .folder-button {
            border-left: 3px solid transparent;
        }
        
        .folder-button:hover:not(.folder-active) {
            background-color: #F3F4F6;
        }
        
        .asset-card {
            transition: all 0.2s ease;
        }
        
        .asset-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        @media (max-width: 768px) {
            .folder-structure {
                display: none;
            }
            
            .mobile-menu-active .folder-structure {
                display: block;
                position: fixed;
                top: 64px;
                left: 0;
                width: 100%;
                height: calc(100vh - 64px);
                z-index: 40;
            }
        }
    </style>
</head>
<body class="bg-gray-100 h-screen flex flex-col overflow-hidden">
    <!-- Header -->
    <header class="bg-white border-b border-gray-200 px-4 py-3 flex items-center shadow-sm">
        <div class="flex items-center">
            <svg class="h-8 w-8 text-blue-600 mr-2" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" fill="currentColor"/>
                <path d="M14 17H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z" fill="currentColor"/>
            </svg>
            <div class="text-lg font-medium text-gray-900">Restaurant Digital Asset Manager</div>
        </div>
        <div class="flex-grow mx-4">
            <div class="relative">
                <input 
                    type="text" 
                    id="search-input"
                    placeholder="Search assets by name, description or tags" 
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                >
                <button class="absolute right-2 top-2 text-gray-500">
                    <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                </button>
            </div>
        </div>
        <div class="flex items-center space-x-4">
            <button 
                id="upload-btn"
                class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
            >
                <svg class="h-4 w-4 mr-1" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                </svg>
                Upload
            </button>
            <div class="h-8 w-8 bg-blue-600 rounded-full text-white flex items-center justify-center font-bold">
                U
            </div>
        </div>
    </header>

    <!-- Main content -->
    <div class="flex flex-1 overflow-hidden">
        <!-- Folder structure - Main folders -->
        <div class="folder-structure w-64 bg-white border-r border-gray-200 flex flex-col">
            <nav class="folder-nav flex-1 pt-3 pb-4">
                <div class="px-4 mb-2 text-xs font-semibold text-gray-500 uppercase tracking-wider">
                    Main Categories
                </div>
                <ul id="main-folders" class="mt-2 mb-3">
                    <!-- Main folders will be populated here -->
                </ul>
            </nav>
        </div>
        
        <!-- Main content area -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Breadcrumb & toolbar -->
            <div class="bg-white p-4 border-b border-gray-200 flex flex-wrap items-center">
                <div class="flex items-center text-sm text-gray-600 mr-6">
                    <a href="#" id="breadcrumb-all" class="hover:text-blue-600">All Assets</a>
                    <span id="breadcrumb-separator-1" class="mx-2 hidden">/</span>
                    <a href="#" id="breadcrumb-main" class="hover:text-blue-600 hidden"></a>
                    <span id="breadcrumb-separator-2" class="mx-2 hidden">/</span>
                    <a href="#" id="breadcrumb-sub" class="hover:text-blue-600 hidden"></a>
                    <span id="breadcrumb-separator-3" class="mx-2 hidden">/</span>
                    <span id="breadcrumb-detail" class="text-gray-900 font-medium hidden"></span>
                </div>
                
                <div class="ml-auto flex space-x-3 items-center">
                    <span class="text-sm text-gray-500" id="asset-count">0 assets</span>
                    
                    <div class="flex border border-gray-300 rounded-md">
                        <button id="grid-view-btn" class="px-3 py-1.5 bg-gray-100 text-gray-800">
                            <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
                            </svg>
                        </button>
                        <button id="list-view-btn" class="px-3 py-1.5 text-gray-600">
                            <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16" />
                            </svg>
                        </button>
                    </div>
                    
                    <select
                        id="sort-by"
                        class="px-3 py-1.5 border border-gray-300 rounded-md text-sm"
                    >
                        <option value="date">Sort by Date</option>
                        <option value="name">Sort by Name</option>
                        <option value="type">Sort by Type</option>
                    </select>
                    
                    <button
                        id="sort-order"
                        class="px-3 py-1.5 border border-gray-300 rounded-md"
                    >
                        <svg class="h-5 w-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12" />
                        </svg>
                    </button>

                    <button 
                        id="delete-btn"
                        class="px-3 py-1.5 rounded text-sm bg-gray-200 text-gray-400 cursor-not-allowed"
                        disabled
                    >
                        <div class="flex items-center">
                            <svg class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                            </svg>
                            Delete
                        </div>
                    </button>
                </div>
            </div>

            <!-- Asset display area -->
            <div id="asset-container" class="flex-1 overflow-y-auto p-6 bg-gray-50">
                <div id="empty-state" class="text-center py-12 hidden">
                    <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
                    </svg>
                    <h3 class="mt-2 text-sm font-medium text-gray-900">No assets found</h3>
                    <p class="mt-1 text-sm text-gray-500" id="empty-state-message">
                        Get started by adding assets to this folder
                    </p>
                    <div class="mt-6">
                        <button
                            id="empty-upload-btn"
                            class="inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                        >
                            <svg class="-ml-1 mr-2 h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                            </svg>
                            Upload an asset
                        </button>
                    </div>
                </div>
                <div id="grid-view" class="asset-grid">
                    <!-- Assets in grid view will be populated here -->
                </div>
                <div id="list-view" class="hidden">
                    <div class="bg-white shadow overflow-hidden border-b border-gray-200 rounded-lg">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-8">
                                        <input
                                            type="checkbox"
                                            id="select-all"
                                            class="h-4 w-4 text-blue-600 border-gray-300 rounded"
                                        >
                                    </th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Asset
                                    </th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Type
                                    </th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Tags
                                    </th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Date Modified
                                    </th>
                                    <th scope="col" class="relative px-6 py-3">
                                        <span class="sr-only">Actions</span>
                                    </th>
                                </tr>
                            </thead>
                            <tbody id="asset-list" class="bg-white divide-y divide-gray-200">
                                <!-- Assets in list view will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Status message -->
    <div id="status-message" class="fixed bottom-4 right-4 px-4 py-2 rounded-lg shadow-lg bg-green-600 text-white hidden"></div>

    <!-- Storage status banner -->
    <div class="fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-white border border-gray-200 px-4 py-2 rounded-lg shadow-lg z-40">
        <div class="flex items-center text-sm">
            <svg class="h-5 w-5 text-green-500 mr-2" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
            </svg>
            <span>Changes are being saved to browser storage</span>
        </div>
    </div>

    <!-- Upload Asset Modal -->
    <div id="upload-modal" class="modal">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl">
            <div class="px-6 py-4 border-b border-gray-200">
                <h3 class="text-lg font-medium text-gray-900">Upload New Asset</h3>
            </div>
            <div class="p-6">
                <div class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="asset-name" class="block text-sm font-medium text-gray-700">Asset Name *</label>
                            <input
                                type="text"
                                id="asset-name"
                                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                                required
                            >
                        </div>
                        <div>
                            <label for="asset-type" class="block text-sm font-medium text-gray-700">Asset Type</label>
                            <select
                                id="asset-type"
                                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                            >
                                <option value="image">Image</option>
                                <option value="document">Document</option>
                                <option value="video">Video</option>
                                <option value="audio">Audio</option>
                                <option value="design">Design File</option>
                            </select>
                        </div>
                    </div>
                    
                    <div>
                        <label for="asset-description" class="block text-sm font-medium text-gray-700">Description</label>
                        <textarea
                            id="asset-description"
                            rows="3"
                            class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                        ></textarea>
                    </div>
                    
                    <div>
                        <label for="asset-tags" class="block text-sm font-medium text-gray-700">Tags (comma separated)</label>
                        <input
                            type="text"
                            id="asset-tags"
                            class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                            placeholder="menu, logo, food, summer"
                        >
                    </div>
                    
                    <div>
                        <label for="asset-path" class="block text-sm font-medium text-gray-700">File Path *</label>
                        <div class="mt-1 flex rounded-md shadow-sm">
                            <input
                                type="text"
                                id="asset-path"
                                class="flex-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                                placeholder="/path/to/your/file.ext"
                                required
                            >
                            <button
                                type="button"
                                id="browse-btn"
                                class="ml-2 inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
                            >
                                Browse
                            </button>
                        </div>
                        <p class="mt-1 text-xs text-gray-500">Enter the full path where the file is stored</p>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label for="folder-select" class="block text-sm font-medium text-gray-700">Main Folder</label>
                            <select
                                id="folder-select"
                                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                            >
                                <!-- Folders will be populated here -->
                            </select>
                        </div>
                        
                        <div>
                            <label for="subfolder-select" class="block text-sm font-medium text-gray-700">Subfolder</label>
                            <select
                                id="subfolder-select"
                                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                                disabled
                            >
                                <option value="">Select subfolder</option>
                            </select>
                        </div>
                        
                        <div>
                            <label for="detail-folder-select" class="block text-sm font-medium text-gray-700">Detail Folder</label>
                            <select
                                id="detail-folder-select"
                                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                                disabled
                            >
                                <option value="">Select detail folder</option>
                            </select>
                        </div>
                    </div>

                    <div id="upload-status" class="mt-4 px-4 py-3 rounded-md hidden"></div>
                </div>
            </div>
            <div class="px-6 py-4 border-t border-gray-200 flex justify-end space-x-3">
                <button
                    type="button"
                    id="cancel-upload-btn"
                    class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
                >
                    Cancel
                </button>
                <button
                    type="button"
                    id="confirm-upload-btn"
                    class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
                >
                    Upload Asset
                </button>
            </div>
        </div>
    </div>

    <!-- Asset Detail Modal -->
    <div id="asset-detail-modal" class="modal">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col">
            <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center">
                <h3 class="text-lg font-medium text-gray-900">Asset Details</h3>
                <button id="close-detail-btn" class="text-gray-400 hover:text-gray-500">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="flex-1 overflow-y-auto p-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <div class="bg-gray-100 rounded-lg p-4 flex items-center justify-center h-80">
                            <img 
                                id="detail-thumbnail" 
                                src="" 
                                alt=""
                                class="max-h-full max-w-full object-contain"
                            >
                        </div>
                        
                        <div class="mt-6">
                            <h3 class="text-sm font-medium text-gray-700">Asset Path Information</h3>
                            <p class="mt-2 text-sm text-gray-600">Path: <span id="detail-path" class="font-mono text-gray-800"></span></p>
                            
                            <div class="mt-4 bg-gray-50 p-3 rounded-md border border-gray-200">
                                <h4 class="text-xs font-medium text-gray-700 mb-1">Full path for reference:</h4>
                                <div id="detail-full-path" class="font-mono text-xs text-gray-600 break-all"></div>
                            </div>
                        </div>
                    </div>

                    <div>
                        <div class="flex items-start mb-4">
                            <div class="mr-3 mt-1" id="detail-type-icon"></div>
                            <div>
                                <h2 id="detail-name" class="text-xl font-bold text-gray-900"></h2>
                                <p id="detail-file-info" class="text-sm text-gray-500"></p>
                            </div>
                        </div>

                        <div class="space-y-6">
                            <div>
                                <h3 class="text-sm font-medium text-gray-700">Description</h3>
                                <p id="detail-description" class="mt-1 text-sm text-gray-600"></p>
                            </div>
                            
                            <div>
                                <h3 class="text-sm font-medium text-gray-700">Tags</h3>
                                <div id="detail-tags" class="flex flex-wrap gap-2 mt-2"></div>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <h3 class="text-sm font-medium text-gray-700">Created</h3>
                                    <p id="detail-created" class="mt-1 text-sm text-gray-600"></p>
                                </div>
                                <div>
                                    <h3 class="text-sm font-medium text-gray-700">Modified</h3>
                                    <p id="detail-modified" class="mt-1 text-sm text-gray-600"></p>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <h3 class="text-sm font-medium text-gray-700">Created By</h3>
                                    <p id="detail-creator" class="mt-1 text-sm text-gray-600"></p>
                                </div>
                                <div id="detail-dimensions-container" class="hidden">
                                    <h3 class="text-sm font-medium text-gray-700">Dimensions</h3>
                                    <p id="detail-dimensions" class="mt-1 text-sm text-gray-600"></p>
                                </div>
                                <div id="detail-duration-container" class="hidden">
                                    <h3 class="text-sm font-medium text-gray-700">Duration</h3>
                                    <p id="detail-duration" class="mt-1 text-sm text-gray-600"></p>
                                </div>
                            </div>
                            
                            <div>
                                <h3 class="text-sm font-medium text-gray-700">Location</h3>
                                <div id="detail-location" class="mt-1 flex items-center space-x-2 text-sm text-gray-600"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="px-6 py-4 border-t border-gray-200">
                <div class="flex justify-between">
                    <div>
                        <button class="inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                            <svg class="-ml-1 mr-2 h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
                            </svg>
                            Edit
                        </button>
                    </div>
                    <div class="flex space-x-3">
                        <button class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                            <svg class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                            </svg>
                            Download
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Application data and state
        let mainFolders;

        let subFolders;
            'brand-assets': [
                { id: 'logo-files', name: 'Logo Files', subfolders: ['Primary Logos', 'Secondary Marks', 'Logo Variations', 'Icons & Favicons'] },
                { id: 'brand-guidelines', name: 'Brand Guidelines', subfolders: ['Color Palette', 'Typography', 'Brand Voice & Messaging'] },
                { id: 'restaurant-identity', name: 'Restaurant Identity', subfolders: ['Exterior Photos', 'Interior Photos', 'Signage', 'Staff Uniforms'] }
            ],
            'menus': [
                { id: 'current-menus', name: 'Current Menus', subfolders: ['Main Menu', 'Beverage Menu', 'Kids Menu', 'Dessert Menu'] },
                { id: 'seasonal-menus', name: 'Seasonal Menus', subfolders: ['Spring', 'Summer', 'Fall', 'Winter'] },
                { id: 'specialty-menus', name: 'Specialty Menus', subfolders: ['Happy Hour', 'Brunch', 'Catering', 'Private Events'] },
                { id: 'digital-menu-files', name: 'Digital Menu Files', subfolders: ['PDF Menus', 'QR Code Menus', 'Online Ordering Menus'] },
                { id: 'menu-archives', name: 'Menu Archives', subfolders: ['2025', '2024', '2023'] }
            ],
            'menu-content': [
                { id: 'food-photography', name: 'Food Photography', subfolders: ['Appetizers', 'Main Courses', 'Desserts', 'Specials'] },
                { id: 'menu-design-files', name: 'Menu Design Files', subfolders: ['Templates', 'Menu Backgrounds', 'Layout Files'] },
                { id: 'menu-copy', name: 'Menu Copy', subfolders: ['Item Descriptions', 'Dietary Information', 'Ingredient Lists'] },
                { id: 'beverage-program', name: 'Beverage Program', subfolders: ['Cocktail Photos', 'Wine List Content', 'Beer Program'] }
            ],
            'marketing-materials': [
                { id: 'print-materials', name: 'Print Materials', subfolders: ['Flyers & Posters', 'Table Tents', 'Business Cards', 'Gift Cards'] },
                { id: 'digital-campaigns', name: 'Digital Campaigns', subfolders: ['Email Templates', 'Banner Ads', 'Promotional Graphics'] },
                { id: 'social-media-content', name: 'Social Media Content', subfolders: ['Facebook', 'Instagram', 'Twitter/X', 'TikTok', 'Content Calendar Templates'] },
                { id: 'loyalty-rewards', name: 'Loyalty & Rewards', subfolders: ['Program Graphics', 'Membership Materials'] },
                { id: 'seasonal-promotions', name: 'Seasonal Promotions', subfolders: ['Holiday Graphics', 'Seasonal Campaigns'] }
            ],
            'digital-media': [
                { id: 'photography', name: 'Photography', subfolders: ['Food Gallery', 'Ambiance & Atmosphere', 'Staff & Team', 'Events & Gatherings'] },
                { id: 'video-content', name: 'Video Content', subfolders: ['Promotional Videos', 'Behind-the-Scenes', 'Chef Interviews', 'Food Preparation'] },
                { id: 'audio', name: 'Audio', subfolders: ['Restaurant Playlists', 'On-Hold Music', 'Radio Spots'] },
                { id: 'stock-resources', name: 'Stock Resources', subfolders: ['Licensed Stock Photos', 'Purchased Templates', 'Font Files'] }
            ],
            'pos-resources': [
                { id: 'microsale-assets', name: 'MicroSale Assets', subfolders: ['Button Icons', 'Screen Backgrounds', 'Custom Receipt Templates'] },
                { id: 'digital-displays', name: 'Digital Displays', subfolders: ['Customer-Facing Display Content', 'Kitchen Display Graphics', 'Drive-thru Display Assets'] },
                { id: 'online-ordering', name: 'Online Ordering', subfolders: ['BiteHeist Menu Photos', 'Item Descriptions', 'Delivery Zone Maps'] },
                { id: 'qr-codes', name: 'QR Codes', subfolders: ['Menu QR Codes', 'Payment QR Codes', 'Feedback QR Codes'] }
            ],
            'customer-experience': [
                { id: 'website-content', name: 'Website Content', subfolders: ['Homepage Assets', 'About Us Content', 'Location & Hours', 'Photo Gallery'] },
                { id: 'customer-communication', name: 'Customer Communication', subfolders: ['Email Templates', 'SMS Templates', 'Feedback Forms'] },
                { id: 'digital-menus', name: 'Digital Menus', subfolders: ['Online Menu PDFs', 'QR Menu Design', 'Interactive Menu Content'] },
                { id: 'table-guest-touchpoints', name: 'Table/Guest Touchpoints', subfolders: ['Table Cards', 'Check Presenters', 'Guest Wifi Cards'] }
            ]
            };
            
            // Initialize asset types
            assetTypes = [

        let assetTypes;
            { id: 'image', name: 'Image', extensions: ['jpg', 'png', 'webp'] },
            { id: 'document', name: 'Document', extensions: ['pdf', 'docx'] },
            { id: 'design', name: 'Design File', extensions: ['psd', 'ai', 'sketch'] },
            { id: 'video', name: 'Video', extensions: ['mp4', 'mov'] },
            // Sample data for assets
            assets = [

        let assets = [];
            {
                id: '1',
                name: 'Primary Logo Full Color',
                description: 'Main restaurant logo on white background',
                type: 'image',
                extension: 'png',
                size: '2.4 MB',
                dimensions: '2000 x 800 px',
                path: '/BRAND ASSETS/Logo Files/Primary Logos/Primary_Logo_Full_Color.png',
                folder: 'brand-assets',
                subfolder: 'logo-files',
                detailFolder: 'Primary Logos',
                tags: ['logo', 'branding', 'primary'],
                dateCreated: '2025-01-15',
                dateModified: '2025-01-15',
                thumbnail: 'https://via.placeholder.com/300/4F46E5/FFFFFF?text=LOGO',
                createdBy: 'Brand Manager'
            },
            {
                id: '2',
                name: 'Menu Spring 2025',
                description: 'Spring menu PDF for print and digital distribution',
                type: 'document',
                extension: 'pdf',
                size: '3.8 MB',
                path: '/MENUS/Seasonal Menus/Spring/Menu_Spring_2025.pdf',
                folder: 'menus',
                subfolder: 'seasonal-menus',
                detailFolder: 'Spring',
                tags: ['menu', 'spring', '2025', 'seasonal'],
                dateCreated: '2025-03-01',
                dateModified: '2025-03-05',
                thumbnail: 'https://via.placeholder.com/300/DC2626/FFFFFF?text=PDF',
                createdBy: 'Marketing Director'
            },
            {
                id: '3',
                name: 'Signature Burger Hero Shot',
                description: 'High-res photograph of signature burger',
                type: 'image',
                extension: 'jpg',
                size: '5.2 MB',
                dimensions: '4000 x 3000 px',
                path: '/MENU CONTENT/Food Photography/Main Courses/Signature_Burger_Hero.jpg',
                folder: 'menu-content',
                subfolder: 'food-photography',
                detailFolder: 'Main Courses',
                tags: ['food', 'burger', 'photography', 'hero image'],
                dateCreated: '2025-02-10',
                dateModified: '2025-02-10',
                thumbnail: 'https://via.placeholder.com/300/065F46/FFFFFF?text=FOOD',
                createdBy: 'Food Photographer'
            },
            {
                id: '4',
                name: 'Instagram Summer Promotion',
                description: 'Promotional post for summer special menu',
                type: 'image',
                extension: 'jpg',
                size: '1.8 MB',
                dimensions: '1080 x 1080 px',
                path: '/MARKETING MATERIALS/Social Media Content/Instagram/Summer_Promo_Post.jpg',
                folder: 'marketing-materials',
                subfolder: 'social-media-content',
                detailFolder: 'Instagram',
                tags: ['social media', 'instagram', 'summer', 'promotion'],
                dateCreated: '2025-06-01',
                dateModified: '2025-06-02',
                thumbnail: 'https://via.placeholder.com/300/0284C7/FFFFFF?text=SOCIAL',
                createdBy: 'Social Media Manager'
            },
            {
                id: '5',
                name: 'Chef Interview - Summer Menu',
                description: 'Video interview with chef discussing summer menu items',
                type: 'video',
                extension: 'mp4',
                size: '128 MB',
                duration: '3:45',
                path: '/DIGITAL MEDIA/Video Content/Chef Interviews/Chef_Summer_Menu_Interview.mp4',
                folder: 'digital-media',
                subfolder: 'video-content',
                detailFolder: 'Chef Interviews',
                tags: ['video', 'chef', 'interview', 'summer menu'],
                dateCreated: '2025-05-15',
                dateModified: '2025-05-18',
                thumbnail: 'https://via.placeholder.com/300/7C3AED/FFFFFF?text=VIDEO',
                createdBy: 'Content Producer'
            },
            {
                id: '6',
                name: 'POS Button Icons Set',
                description: 'Full set of custom icons for MicroSale POS system',
                type: 'design',
                extension: 'ai',
                size: '8.4 MB',
                path: '/POS & SYSTEM RESOURCES/MicroSale Assets/Button Icons/POS_Button_Icons_Set.ai',
                folder: 'pos-resources',
                subfolder: 'microsale-assets',
                detailFolder: 'Button Icons',
                tags: ['pos', 'icons', 'microsale', 'buttons'],
                dateCreated: '2025-01-30',
                dateModified: '2025-02-05',
                thumbnail: 'https://via.placeholder.com/300/EA580C/FFFFFF?text=ICONS',
                createdBy: 'UI Designer'
            },
            {
                id: '7',
                name: 'Website Hero Banner',
                description: 'Main hero image for restaurant website homepage',
                type: 'image',
                extension: 'jpg',
                size: '4.6 MB',
                dimensions: '2400 x 1200 px',
                path: '/CUSTOMER EXPERIENCE/Website Content/Homepage Assets/Homepage_Hero_Banner.jpg',
                folder: 'customer-experience',
                subfolder: 'website-content',
                detailFolder: 'Homepage Assets',
                tags: ['website', 'hero', 'banner', 'homepage'],
                dateCreated: '2025-04-10',
                dateModified: '2025-04-12',
                thumbnail: 'https://via.placeholder.com/300/2563EB/FFFFFF?text=WEB',
                createdBy: 'Web Designer'
            },
            {
                id: '8',
                name: 'Brand Style Guide 2025',
                description: 'Comprehensive brand guidelines document',
                type: 'document',
                extension: 'pdf',
                size: '12.2 MB',
                path: '/BRAND ASSETS/Brand Guidelines/Brand_Style_Guide_2025.pdf',
                folder: 'brand-assets',
                subfolder: 'brand-guidelines',
                detailFolder: '',
                tags: ['brand', 'guidelines', 'style guide'],
                dateCreated: '2025-01-05',
                dateModified: '2025-01-10',
                thumbnail: 'https://via.placeholder.com/300/DC2626/FFFFFF?text=PDF',
                createdBy: 'Brand Director'
            }
        ];

        // Application state
        let state = {
            activeFolder: null,
            activeSubfolder: null,
            activeDetailFolder: null,
            searchTerm: '',
            selectedAssets: [],
            viewMode: 'grid',
            sortBy: 'date',
            sortOrder: 'desc',
            currentAsset: null
        };

        // DOM Elements
        const elements = {
            mainFoldersList: document.getElementById('main-folders'),
            breadcrumbAll: document.getElementById('breadcrumb-all'),
            breadcrumbMain: document.getElementById('breadcrumb-main'),
            breadcrumbSub: document.getElementById('breadcrumb-sub'),
            breadcrumbDetail: document.getElementById('breadcrumb-detail'),
            breadcrumbSeparator1: document.getElementById('breadcrumb-separator-1'),
            breadcrumbSeparator2: document.getElementById('breadcrumb-separator-2'),
            breadcrumbSeparator3: document.getElementById('breadcrumb-separator-3'),
            assetCount: document.getElementById('asset-count'),
            gridView: document.getElementById('grid-view'),
            listView: document.getElementById('list-view'),
            assetList: document.getElementById('asset-list'),
            emptyState: document.getElementById('empty-state'),
            emptyStateMessage: document.getElementById('empty-state-message'),
            gridViewBtn: document.getElementById('grid-view-btn'),
            listViewBtn: document.getElementById('list-view-btn'),
            sortBySelect: document.getElementById('sort-by'),
            sortOrderBtn: document.getElementById('sort-order'),
            deleteBtn: document.getElementById('delete-btn'),
            searchInput: document.getElementById('search-input'),
            uploadBtn: document.getElementById('upload-btn'),
            emptyUploadBtn: document.getElementById('empty-upload-btn'),
            uploadModal: document.getElementById('upload-modal'),
            confirmUploadBtn: document.getElementById('confirm-upload-btn'),
            cancelUploadBtn: document.getElementById('cancel-upload-btn'),
            assetDetailModal: document.getElementById('asset-detail-modal'),
            closeDetailBtn: document.getElementById('close-detail-btn'),
            statusMessage: document.getElementById('status-message'),
            assetName: document.getElementById('asset-name'),
            assetDescription: document.getElementById('asset-description'),
            assetType: document.getElementById('asset-type'),
            assetTags: document.getElementById('asset-tags'),
            assetPath: document.getElementById('asset-path'),
            folderSelect: document.getElementById('folder-select'),
            subfolderSelect: document.getElementById('subfolder-select'),
            detailFolderSelect: document.getElementById('detail-folder-select'),
            browseBtn: document.getElementById('browse-btn'),
            uploadStatus: document.getElementById('upload-status'),
            selectAll: document.getElementById('select-all'),
            detailThumbnail: document.getElementById('detail-thumbnail'),
            detailPath: document.getElementById('detail-path'),
            detailFullPath: document.getElementById('detail-full-path'),
            detailTypeIcon: document.getElementById('detail-type-icon'),
            detailName: document.getElementById('detail-name'),
            detailFileInfo: document.getElementById('detail-file-info'),
            detailDescription: document.getElementById('detail-description'),
            detailTags: document.getElementById('detail-tags'),
            detailCreated: document.getElementById('detail-created'),
            detailModified: document.getElementById('detail-modified'),
            detailCreator: document.getElementById('detail-creator'),
            detailDimensionsContainer: document.getElementById('detail-dimensions-container'),
            detailDimensions: document.getElementById('detail-dimensions'),
            detailDurationContainer: document.getElementById('detail-duration-container'),
            detailDuration: document.getElementById('detail-duration'),
            detailLocation: document.getElementById('detail-location')
        };

        // Initialize application
        function init() {
            // Initialize data structures
            // Initialize asset types
            mainFolders = [
                { id: 'brand-assets', name: 'BRAND ASSETS', icon: 'palette' },
                { id: 'menus', name: 'MENUS', icon: 'utensils' },
                { id: 'menu-content', name: 'MENU CONTENT', icon: 'camera' },
                { id: 'marketing-materials', name: 'MARKETING MATERIALS', icon: 'bullhorn' },
                { id: 'digital-media', name: 'DIGITAL MEDIA', icon: 'image' },
                { id: 'pos-resources', name: 'POS & SYSTEM RESOURCES', icon: 'credit-card' },
                { id: 'customer-experience', name: 'CUSTOMER EXPERIENCE', icon: 'users' }
            ];
            
            // Initialize subfolders
            subFolders = {
            // Load saved assets from localStorage
            loadSavedAssets();
            
            // Render main folders
            renderMainFolders();
            
            // Fill folder selects in upload modal
            populateFolderSelects();
            
            // Add event listeners
            setupEventListeners();
            
            // Initial render
            updateView();
        }

        // Load saved assets from localStorage
        function loadSavedAssets() {
            try {
                const savedAssets = localStorage.getItem('restaurantDamAssets');
                if (savedAssets) {
                    assets = JSON.parse(savedAssets);
                } else {
                    // If no saved assets, save the initial ones
                    localStorage.setItem('restaurantDamAssets', JSON.stringify(assets));
                }
            } catch (error) {
                console.error('Error loading saved assets:', error);
            }
        }

        // Save assets to localStorage
        function saveAssets() {
            try {
                localStorage.setItem('restaurantDamAssets', JSON.stringify(assets));
                return true;
            } catch (error) {
                console.error('Error saving assets:', error);
                return false;
            }
        }

        // Render main folders
        function renderMainFolders() {
            elements.mainFoldersList.innerHTML = '';
            
            mainFolders.forEach(folder => {
                const li = document.createElement('li');
                const isActive = state.activeFolder === folder.id;
                
                li.innerHTML = `
                    <button
                        class="folder-button flex items-center px-3 py-2 text-sm rounded-md w-full ${
                            isActive ? 'folder-active font-medium' : 'text-gray-700 hover:bg-gray-100'
                        }"
                        data-folder="${folder.id}"
                    >
                        <span class="mr-2 ${isActive ? 'text-blue-600' : 'text-gray-500'}">
                            ${renderFolderIcon(folder.icon)}
                        </span>
                        <span class="truncate">${folder.name}</span>
                    </button>
                `;
                
                if (folder.id === state.activeFolder) {
                    // Render subfolders indented
                    const subfolderList = document.createElement('ul');
                    subfolderList.className = 'ml-6 mt-1 space-y-1';
                    
                    subFolders[folder.id]?.forEach(subfolder => {
                        const subLi = document.createElement('li');
                        const isSubActive = state.activeSubfolder === subfolder.id;
                        
                        subLi.innerHTML = `
                            <button
                                class="folder-button flex items-center px-3 py-1.5 text-sm rounded-md w-full ${
                                    isSubActive ? 'folder-active font-medium' : 'text-gray-700 hover:bg-gray-100'
                                }"
                                data-subfolder="${subfolder.id}"
                            >
                                <span class="mr-2 ${isSubActive ? 'text-blue-600' : 'text-gray-500'}">
                                    <svg class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1H8a3 3 0 00-3 3v1.5a1.5 1.5 0 01-3 0V6z" clip-rule="evenodd" />
                                        <path d="M6 12A2 2 0 018 10h8a2 2 0 012 2v5a2 2 0 01-2 2H8a2 2 0 01-2-2v-5z" />
                                    </svg>
                                </span>
                                <span class="truncate">${subfolder.name}</span>
                            </button>
                        `;
                        
                        if (subfolder.id === state.activeSubfolder && subfolder.subfolders && subfolder.subfolders.length > 0) {
                            // Render detail folders with more indentation
                            const detailList = document.createElement('ul');
                            detailList.className = 'ml-6 mt-1 space-y-1';
                            
                            subfolder.subfolders.forEach(detail => {
                                const detailLi = document.createElement('li');
                                const isDetailActive = state.activeDetailFolder === detail;
                                
                                detailLi.innerHTML = `
                                    <button
                                        class="folder-button flex items-center px-2 py-1 text-xs rounded-md w-full ${
                                            isDetailActive ? 'folder-active font-medium' : 'text-gray-700 hover:bg-gray-100'
                                        }"
                                        data-detail-folder="${detail}"
                                    >
                                        <span class="mr-2 ${isDetailActive ? 'text-blue-600' : 'text-gray-500'}">
                                            <svg class="h-3 w-3" viewBox="0 0 20 20" fill="currentColor">
                                                <path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1H8a3 3 0 00-3 3v1.5a1.5 1.5 0 01-3 0V6z" clip-rule="evenodd" />
                                                <path d="M6 12A2 2 0 018 10h8a2 2 0 012 2v5a2 2 0 01-2 2H8a2 2 0 01-2-2v-5z" />
                                            </svg>
                                        </span>
                                        <span class="truncate">${detail}</span>
                                    </button>
                                `;
                                
                                detailList.appendChild(detailLi);
                                
                                // Add click event listener for detail folder
                                const detailButton = detailLi.querySelector('button');
                                detailButton.addEventListener('click', () => {
                                    state.activeDetailFolder = detail;
                                    state.selectedAssets = [];
                                    updateView();
                                });
                            });
                            
                            subLi.appendChild(detailList);
                        }
                        
                        subfolderList.appendChild(subLi);
                        
                        // Add click event listener for subfolder
                        const subButton = subLi.querySelector('button[data-subfolder]');
                        subButton.addEventListener('click', () => {
                            state.activeSubfolder = subfolder.id;
                            state.activeDetailFolder = null;
                            state.selectedAssets = [];
                            updateView();
                        });
                    });
                    
                    li.appendChild(subfolderList);
                }
                
                elements.mainFoldersList.appendChild(li);
                
                // Add click event listener for main folder
                const button = li.querySelector('button[data-folder]');
                button.addEventListener('click', () => {
                    state.activeFolder = folder.id;
                    state.activeSubfolder = null;
                    state.activeDetailFolder = null;
                    state.selectedAssets = [];
                    updateView();
                });
            });
        }

        // Update breadcrumb navigation
        function updateBreadcrumb() {
            // Reset breadcrumb
            elements.breadcrumbMain.classList.add('hidden');
            elements.breadcrumbSub.classList.add('hidden');
            elements.breadcrumbDetail.classList.add('hidden');
            elements.breadcrumbSeparator1.classList.add('hidden');
            elements.breadcrumbSeparator2.classList.add('hidden');
            elements.breadcrumbSeparator3.classList.add('hidden');
            
            // Update breadcrumb based on active folders
            if (state.activeFolder) {
                const mainFolder = mainFolders.find(f => f.id === state.activeFolder);
                elements.breadcrumbMain.textContent = mainFolder.name;
                elements.breadcrumbMain.classList.remove('hidden');
                elements.breadcrumbSeparator1.classList.remove('hidden');
                
                elements.breadcrumbMain.setAttribute('data-folder', state.activeFolder);
                
                if (state.activeSubfolder) {
                    const subfolder = subFolders[state.activeFolder]?.find(sf => sf.id === state.activeSubfolder);
                    elements.breadcrumbSub.textContent = subfolder.name;
                    elements.breadcrumbSub.classList.remove('hidden');
                    elements.breadcrumbSeparator2.classList.remove('hidden');
                    
                    elements.breadcrumbSub.setAttribute('data-subfolder', state.activeSubfolder);
                    
                    if (state.activeDetailFolder) {
                        elements.breadcrumbDetail.textContent = state.activeDetailFolder;
                        elements.breadcrumbDetail.classList.remove('hidden');
                        elements.breadcrumbSeparator3.classList.remove('hidden');
                    }
                }
            }
        }

        // Get filtered assets based on current state
        function getFilteredAssets() {
            // Start with filtering by folder structure
            let filtered = [...assets];
            
            if (state.activeFolder) {
                filtered = filtered.filter(asset => asset.folder === state.activeFolder);
                
                if (state.activeSubfolder) {
                    filtered = filtered.filter(asset => asset.subfolder === state.activeSubfolder);
                    
                    if (state.activeDetailFolder) {
                        filtered = filtered.filter(asset => asset.detailFolder === state.activeDetailFolder);
                    }
                }
            }
            
            // Then filter by search term
            if (state.searchTerm) {
                const search = state.searchTerm.toLowerCase();
                filtered = filtered.filter(asset => 
                    asset.name.toLowerCase().includes(search) ||
                    (asset.description && asset.description.toLowerCase().includes(search)) ||
                    asset.tags.some(tag => tag.toLowerCase().includes(search))
                );
            }
            
            // Finally sort the results
            filtered.sort((a, b) => {
                if (state.sortBy === 'date') {
                    return state.sortOrder === 'asc' 
                        ? new Date(a.dateModified) - new Date(b.dateModified)
                        : new Date(b.dateModified) - new Date(a.dateModified);
                } else if (state.sortBy === 'name') {
                    return state.sortOrder === 'asc'
                        ? a.name.localeCompare(b.name)
                        : b.name.localeCompare(a.name);
                } else if (state.sortBy === 'type') {
                    return state.sortOrder === 'asc'
                        ? a.type.localeCompare(b.type)
                        : b.type.localeCompare(a.type);
                }
                return 0;
            });
            
            return filtered;
        }

        // Render assets in grid view
        function renderGridView(filteredAssets) {
            elements.gridView.innerHTML = '';
            
            filteredAssets.forEach(asset => {
                const div = document.createElement('div');
                div.className = `asset-card bg-white rounded-lg shadow-sm border overflow-hidden ${
                    state.selectedAssets.includes(asset.id) ? 'ring-2 ring-blue-500 border-blue-500' : 'border-gray-200'
                }`;
                
                div.innerHTML = `
                    <div class="p-1 flex justify-end">
                        <input
                            type="checkbox"
                            class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
                            data-asset-id="${asset.id}"
                            ${state.selectedAssets.includes(asset.id) ? 'checked' : ''}
                        >
                    </div>
                    <div class="flex justify-center p-4 bg-gray-50 h-40 cursor-pointer view-asset" data-asset-id="${asset.id}">
                        <img 
                            src="${asset.thumbnail}" 
                            alt="${asset.name}" 
                            class="h-full object-contain"
                        >
                    </div>
                    <div class="p-4">
                        <div class="flex items-center mb-2">
                            ${renderFileTypeIcon(asset.type, asset.extension)}
                            <span class="ml-2 uppercase text-xs font-bold text-gray-500">${asset.extension}</span>
                        </div>
                        <h3 class="text-sm font-medium text-gray-900 truncate cursor-pointer view-asset" data-asset-id="${asset.id}" title="${asset.name}">
                            ${asset.name}
                        </h3>
                        <p class="text-xs text-gray-500 mt-1 truncate" title="${asset.description || ''}">
                            ${asset.description || ''}
                        </p>
                        <div class="mt-3 flex flex-wrap gap-1">
                            ${asset.tags.slice(0, 2).map(tag => `
                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800">
                                    ${tag}
                                </span>
                            `).join('')}
                            ${asset.tags.length > 2 ? `
                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800">
                                    +${asset.tags.length - 2}
                                </span>
                            ` : ''}
                        </div>
                    </div>
                    <div class="border-t border-gray-200 px-4 py-3 bg-gray-50 flex justify-between items-center">
                        <div class="text-xs text-gray-500">
                            ${new Date(asset.dateModified).toLocaleDateString()}
                        </div>
                        <button 
                            class="text-sm text-blue-600 hover:text-blue-800 view-asset"
                            data-asset-id="${asset.id}"
                        >
                            View
                        </button>
                    </div>
                `;
                
                elements.gridView.appendChild(div);
                
                // Add event listeners
                const checkbox = div.querySelector('input[type="checkbox"]');
                checkbox.addEventListener('change', (e) => {
                    toggleAssetSelection(asset.id);
                });
                
                const viewElements = div.querySelectorAll('.view-asset');
                viewElements.forEach(el => {
                    el.addEventListener('click', () => {
                        viewAssetDetails(asset.id);
                    });
                });
            });
        }

        // Render assets in list view
        function renderListView(filteredAssets) {
            elements.assetList.innerHTML = '';
            
            filteredAssets.forEach(asset => {
                const tr = document.createElement('tr');
                tr.className = state.selectedAssets.includes(asset.id) ? 'bg-blue-50' : 'hover:bg-gray-50';
                
                tr.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <input
                            type="checkbox"
                            class="h-4 w-4 text-blue-600 border-gray-300 rounded"
                            data-asset-id="${asset.id}"
                            ${state.selectedAssets.includes(asset.id) ? 'checked' : ''}
                        >
                    </td>
                    <td class="px-6 py-4">
                        <div class="flex items-center">
                            <div class="flex-shrink-0 h-10 w-10 rounded bg-gray-100 flex items-center justify-center cursor-pointer view-asset" data-asset-id="${asset.id}">
                                <img 
                                    src="${asset.thumbnail}" 
                                    alt="" 
                                    class="h-8 w-8 object-contain"
                                >
                            </div>
                            <div class="ml-4">
                                <div class="text-sm font-medium text-gray-900 cursor-pointer view-asset" data-asset-id="${asset.id}">${asset.name}</div>
                                <div class="text-sm text-gray-500 truncate max-w-xs">${asset.description || ''}</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            ${renderFileTypeIcon(asset.type, asset.extension)}
                            <span class="ml-2 text-sm text-gray-900">${asset.type}</span>
                            <span class="ml-1 text-xs text-gray-500">(.${asset.extension})</span>
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <div class="flex flex-wrap gap-1">
                            ${asset.tags.map(tag => `
                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800">
                                    ${tag}
                                </span>
                            `).join('')}
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        ${new Date(asset.dateModified).toLocaleDateString()}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <button 
                            class="text-blue-600 hover:text-blue-900 view-asset"
                            data-asset-id="${asset.id}"
                        >
                            View
                        </button>
                    </td>
                `;
                
                elements.assetList.appendChild(tr);
                
                // Add event listeners
                const checkbox = tr.querySelector('input[type="checkbox"]');
                checkbox.addEventListener('change', () => {
                    toggleAssetSelection(asset.id);
                });
                
                const viewElements = tr.querySelectorAll('.view-asset');
                viewElements.forEach(el => {
                    el.addEventListener('click', () => {
                        viewAssetDetails(asset.id);
                    });
                });
            });
        }

        // Update view based on current state
        function updateView() {
            // Render folder navigation
            renderMainFolders();
            updateBreadcrumb();
            
            // Get filtered assets
            const filteredAssets = getFilteredAssets();
            
            // Update asset count
            elements.assetCount.textContent = `${filteredAssets.length} asset${filteredAssets.length === 1 ? '' : 's'}`;
            
            // Update empty state
            if (filteredAssets.length === 0) {
                elements.emptyState.classList.remove('hidden');
                elements.gridView.classList.add('hidden');
                elements.listView.classList.add('hidden');
                
                // Update empty state message
                if (state.searchTerm) {
                    elements.emptyStateMessage.textContent = 'Try a different search term';
                } else {
                    elements.emptyStateMessage.textContent = 'Get started by adding assets to this folder';
                }
            } else {
                elements.emptyState.classList.add('hidden');
                
                // Render assets based on view mode
                if (state.viewMode === 'grid') {
                    elements.gridView.classList.remove('hidden');
                    elements.listView.classList.add('hidden');
                    renderGridView(filteredAssets);
                } else {
                    elements.gridView.classList.add('hidden');
                    elements.listView.classList.remove('hidden');
                    renderListView(filteredAssets);
                }
            }
            
            // Update delete button state
            updateDeleteButton();
            
            // Update select all checkbox state
            updateSelectAllCheckbox(filteredAssets);
        }

        // Toggle asset selection
        function toggleAssetSelection(id) {
            if (state.selectedAssets.includes(id)) {
                state.selectedAssets = state.selectedAssets.filter(assetId => assetId !== id);
            } else {
                state.selectedAssets.push(id);
            }
            
            updateView();
        }

        // Update delete button state
        function updateDeleteButton() {
            if (state.selectedAssets.length > 0) {
                elements.deleteBtn.classList.remove('bg-gray-200', 'text-gray-400', 'cursor-not-allowed');
                elements.deleteBtn.classList.add('bg-red-600', 'text-white', 'hover:bg-red-700');
                elements.deleteBtn.disabled = false;
            } else {
                elements.deleteBtn.classList.add('bg-gray-200', 'text-gray-400', 'cursor-not-allowed');
                elements.deleteBtn.classList.remove('bg-red-600', 'text-white', 'hover:bg-red-700');
                elements.deleteBtn.disabled = true;
            }
        }

        // Update select all checkbox state
        function updateSelectAllCheckbox(filteredAssets) {
            if (!elements.selectAll) return;
            
            if (filteredAssets.length === 0) {
                elements.selectAll.checked = false;
                elements.selectAll.disabled = true;
            } else {
                elements.selectAll.disabled = false;
                
                if (state.selectedAssets.length === filteredAssets.length) {
                    elements.selectAll.checked = true;
                    elements.selectAll.indeterminate = false;
                } else if (state.selectedAssets.length > 0) {
                    elements.selectAll.checked = false;
                    elements.selectAll.indeterminate = true;
                } else {
                    elements.selectAll.checked = false;
                    elements.selectAll.indeterminate = false;
                }
            }
        }

        // Delete selected assets
        function deleteAssets() {
            if (state.selectedAssets.length === 0) return;
            
            // Filter out selected assets
            assets = assets.filter(asset => !state.selectedAssets.includes(asset.id));
            
            // Save to localStorage
            const saved = saveAssets();
            
            // Show status message
            if (saved) {
                showStatus(`${state.selectedAssets.length} asset(s) deleted successfully`);
            } else {
                showStatus('Error saving changes', 'error');
            }
            
            // Clear selection
            state.selectedAssets = [];
            
            // Update view
            updateView();
        }

        // View asset details
        function viewAssetDetails(id) {
            const asset = assets.find(a => a.id === id);
            if (!asset) return;
            
            state.currentAsset = asset;
            
            // Fill modal content
            elements.detailThumbnail.src = asset.thumbnail;
            elements.detailThumbnail.alt = asset.name;
            elements.detailPath.textContent = asset.path;
            elements.detailFullPath.textContent = asset.path;
            elements.detailTypeIcon.innerHTML = renderFileTypeIcon(asset.type, asset.extension);
            elements.detailName.textContent = asset.name;
            elements.detailFileInfo.textContent = `${asset.type.charAt(0).toUpperCase() + asset.type.slice(1)} • .${asset.extension} • ${asset.size}`;
            elements.detailDescription.textContent = asset.description || 'No description provided';
            
            // Tags
            elements.detailTags.innerHTML = '';
            if (asset.tags && asset.tags.length > 0) {
                asset.tags.forEach(tag => {
                    const span = document.createElement('span');
                    span.className = 'inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800';
                    span.textContent = tag;
                    elements.detailTags.appendChild(span);
                });
            } else {
                const span = document.createElement('span');
                span.className = 'text-sm text-gray-500';
                span.textContent = 'No tags';
                elements.detailTags.appendChild(span);
            }
            
            // Dates
            elements.detailCreated.textContent = new Date(asset.dateCreated).toLocaleDateString();
            elements.detailModified.textContent = new Date(asset.dateModified).toLocaleDateString();
            
            // Creator
            elements.detailCreator.textContent = asset.createdBy;
            
            // Dimensions (for images)
            if (asset.dimensions) {
                elements.detailDimensionsContainer.classList.remove('hidden');
                elements.detailDimensions.textContent = asset.dimensions;
            } else {
                elements.detailDimensionsContainer.classList.add('hidden');
            }
            
            // Duration (for video/audio)
            if (asset.duration) {
                elements.detailDurationContainer.classList.remove('hidden');
                elements.detailDuration.textContent = asset.duration;
            } else {
                elements.detailDurationContainer.classList.add('hidden');
            }
            
            // Location
            elements.detailLocation.innerHTML = '';
            
            // Main folder
            const mainFolderSpan = document.createElement('span');
            mainFolderSpan.textContent = mainFolders.find(f => f.id === asset.folder)?.name || '-';
            elements.detailLocation.appendChild(mainFolderSpan);
            
            // Arrow
            const arrow1 = document.createElement('svg');
            arrow1.className = 'h-4 w-4 text-gray-400';
            arrow1.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />';
            arrow1.setAttribute('fill', 'none');
            arrow1.setAttribute('viewBox', '0 0 24 24');
            arrow1.setAttribute('stroke', 'currentColor');
            elements.detailLocation.appendChild(arrow1);
            
            // Subfolder
            const subfolderSpan = document.createElement('span');
            subfolderSpan.textContent = subFolders[asset.folder]?.find(sf => sf.id === asset.subfolder)?.name || '-';
            elements.detailLocation.appendChild(subfolderSpan);
            
            // Detail folder (if exists)
            if (asset.detailFolder) {
                const arrow2 = document.createElement('svg');
                arrow2.className = 'h-4 w-4 text-gray-400';
                arrow2.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />';
                arrow2.setAttribute('fill', 'none');
                arrow2.setAttribute('viewBox', '0 0 24 24');
                arrow2.setAttribute('stroke', 'currentColor');
                elements.detailLocation.appendChild(arrow2);
                
                const detailFolderSpan = document.createElement('span');
                detailFolderSpan.textContent = asset.detailFolder;
                elements.detailLocation.appendChild(detailFolderSpan);
            }
            
            // Show modal
            elements.assetDetailModal.classList.add('active');
        }

        // Close asset detail modal
        function closeAssetDetail() {
            elements.assetDetailModal.classList.remove('active');
            state.currentAsset = null;
        }

        // Populate folder selects in upload modal
        function populateFolderSelects() {
            // Main folders
            elements.folderSelect.innerHTML = '';
            mainFolders.forEach(folder => {
                const option = document.createElement('option');
                option.value = folder.id;
                option.textContent = folder.name;
                elements.folderSelect.appendChild(option);
            });
            
            // Update subfolder select when main folder changes
            elements.folderSelect.addEventListener('change', () => {
                const folderId = elements.folderSelect.value;
                updateSubfolderSelect(folderId);
            });
            
            // Update detail folder select when subfolder changes
            elements.subfolderSelect.addEventListener('change', () => {
                const folderId = elements.folderSelect.value;
                const subfolderId = elements.subfolderSelect.value;
                updateDetailFolderSelect(folderId, subfolderId);
            });
        }

        // Update subfolder select based on selected main folder
        function updateSubfolderSelect(folderId) {
            elements.subfolderSelect.innerHTML = '<option value="">Select subfolder</option>';
            
            if (!folderId || !subFolders[folderId] || subFolders[folderId].length === 0) {
                elements.subfolderSelect.disabled = true;
                elements.detailFolderSelect.disabled = true;
                elements.detailFolderSelect.innerHTML = '<option value="">Select detail folder</option>';
                return;
            }
            
            elements.subfolderSelect.disabled = false;
            
            subFolders[folderId].forEach(subfolder => {
                const option = document.createElement('option');
                option.value = subfolder.id;
                option.textContent = subfolder.name;
                elements.subfolderSelect.appendChild(option);
            });
            
            // Reset detail folder select
            elements.detailFolderSelect.innerHTML = '<option value="">Select detail folder</option>';
            elements.detailFolderSelect.disabled = true;
        }

        // Update detail folder select based on selected subfolder
        function updateDetailFolderSelect(folderId, subfolderId) {
            elements.detailFolderSelect.innerHTML = '<option value="">Select detail folder</option>';
            
            if (!folderId || !subfolderId) {
                elements.detailFolderSelect.disabled = true;
                return;
            }
            
            const subfolder = subFolders[folderId]?.find(sf => sf.id === subfolderId);
            
            if (!subfolder || !subfolder.subfolders || subfolder.subfolders.length === 0) {
                elements.detailFolderSelect.disabled = true;
                return;
            }
            
            elements.detailFolderSelect.disabled = false;
            
            subfolder.subfolders.forEach(detailFolder => {
                const option = document.createElement('option');
                option.value = detailFolder;
                option.textContent = detailFolder;
                elements.detailFolderSelect.appendChild(option);
            });
        }

        // Show upload modal
        function showUploadModal() {
            // Reset form
            elements.assetName.value = '';
            elements.assetDescription.value = '';
            elements.assetType.value = 'image';
            elements.assetTags.value = '';
            elements.assetPath.value = '';
            
            // Set current folder as default
            if (state.activeFolder) {
                elements.folderSelect.value = state.activeFolder;
                updateSubfolderSelect(state.activeFolder);
                
                if (state.activeSubfolder) {
                    elements.subfolderSelect.value = state.activeSubfolder;
                    updateDetailFolderSelect(state.activeFolder, state.activeSubfolder);
                    
                    if (state.activeDetailFolder) {
                        elements.detailFolderSelect.value = state.activeDetailFolder;
                    }
                }
            } else {
                elements.folderSelect.selectedIndex = 0;
                updateSubfolderSelect(elements.folderSelect.value);
            }
            
            // Hide status
            if (elements.uploadStatus) {
                elements.uploadStatus.classList.add('hidden');
            }
            
            // Show modal
            elements.uploadModal.classList.add('active');
        }

        // Close upload modal
        function closeUploadModal() {
            elements.uploadModal.classList.remove('active');
        }

        // Upload a new asset
        function uploadAsset() {
            // Validate required fields
            if (!elements.assetName.value || !elements.assetPath.value) {
                showUploadStatus('Please provide both a name and file path', 'error');
                return;
            }
            
            // Get folder info
            const folder = elements.folderSelect.value;
            const subfolder = elements.subfolderSelect.value;
            const detailFolder = elements.detailFolderSelect.value;
            
            // Extract filename and extension from path
            const filePath = elements.assetPath.value;
            const filename = filePath.split(/[\/\\]/).pop();
            const extension = filename.split('.').pop().toLowerCase();
            
            // Create new asset
            const newId = (Math.max(...assets.map(a => parseInt(a.id) || 0)) + 1).toString();
            
            // Process tags
            const tags = elements.assetTags.value 
                ? elements.assetTags.value.split(',').map(tag => tag.trim()) 
                : [];
            
            // Get thumbnail based on type
            const type = elements.assetType.value;
            let thumbnail;
            
            switch(type) {
                case 'image':
                    thumbnail = 'https://via.placeholder.com/300/4F46E5/FFFFFF?text=IMG';
                    break;
                case 'video':
                    thumbnail = 'https://via.placeholder.com/300/7C3AED/FFFFFF?text=VID';
                    break;
                case 'document':
                    thumbnail = 'https://via.placeholder.com/300/DC2626/FFFFFF?text=DOC';
                    break;
                case 'audio':
                    thumbnail = 'https://via.placeholder.com/300/EA580C/FFFFFF?text=AUD';
                    break;
                case 'design':
                    thumbnail = 'https://via.placeholder.com/300/059669/FFFFFF?text=DESIGN';
                    break;
                default:
                    thumbnail = 'https://via.placeholder.com/300/6B7280/FFFFFF?text=FILE';
            }
            
            // Construct full path
            const folderName = mainFolders.find(f => f.id === folder)?.name || '';
            const subfolderName = subFolders[folder]?.find(sf => sf.id === subfolder)?.name || '';
            const fullPath = `/${folderName}/${subfolderName}${detailFolder ? `/${detailFolder}` : ''}/${filename}`;
            
            // Create asset object
            const newAsset = {
                id: newId,
                name: elements.assetName.value,
                description: elements.assetDescription.value,
                type: type,
                extension: extension,
                size: '0 MB',
                path: fullPath,
                folder: folder,
                subfolder: subfolder,
                detailFolder: detailFolder,
                tags: tags,
                dateCreated: new Date().toISOString().split('T')[0],
                dateModified: new Date().toISOString().split('T')[0],
                thumbnail: thumbnail,
                createdBy: 'Current User'
            };
            
            // Add dimensions if it's an image
            if (type === 'image') {
                newAsset.dimensions = '1920 x 1080 px';
            }
            
            // Add duration if it's a video or audio
            if (type === 'video' || type === 'audio') {
                newAsset.duration = '0:00';
            }
            
            // Add to assets array
            assets.push(newAsset);
            
            // Save to localStorage
            const saved = saveAssets();
            
            if (saved) {
                showStatus(`Asset "${newAsset.name}" has been added successfully`);
                closeUploadModal();
                
                // Navigate to the new asset location
                state.activeFolder = folder;
                state.activeSubfolder = subfolder;
                state.activeDetailFolder = detailFolder;
                
                // Update view
                updateView();
            } else {
                showUploadStatus('Error saving asset', 'error');
            }
        }

        // Show status message in the main UI
        function showStatus(message, type = 'success') {
            elements.statusMessage.textContent = message;
            
            if (type === 'error') {
                elements.statusMessage.classList.remove('bg-green-600');
                elements.statusMessage.classList.add('bg-red-600');
            } else {
                elements.statusMessage.classList.remove('bg-red-600');
                elements.statusMessage.classList.add('bg-green-600');
            }
            
            elements.statusMessage.classList.remove('hidden');
            
            // Hide after 3 seconds
            setTimeout(() => {
                elements.statusMessage.classList.add('hidden');
            }, 3000);
        }

        // Show status message in the upload modal
        function showUploadStatus(message, type = 'success') {
            if (!elements.uploadStatus) return;
            
            elements.uploadStatus.textContent = message;
            
            if (type === 'error') {
                elements.uploadStatus.classList.remove('bg-green-50', 'text-green-700', 'border-green-200', 'bg-blue-50', 'text-blue-700', 'border-blue-200');
                elements.uploadStatus.classList.add('bg-red-50', 'text-red-700', 'border', 'border-red-200');
            } else if (type === 'info') {
                elements.uploadStatus.classList.remove('bg-green-50', 'text-green-700', 'border-green-200', 'bg-red-50', 'text-red-700', 'border-red-200');
                elements.uploadStatus.classList.add('bg-blue-50', 'text-blue-700', 'border', 'border-blue-200');
            } else {
                elements.uploadStatus.classList.remove('bg-red-50', 'text-red-700', 'border-red-200', 'bg-blue-50', 'text-blue-700', 'border-blue-200');
                elements.uploadStatus.classList.add('bg-green-50', 'text-green-700', 'border', 'border-green-200');
            }
            
            elements.uploadStatus.classList.remove('hidden');
        }

        // Helper function to render folder icon
        function renderFolderIcon(iconName) {
            switch(iconName) {
                case 'palette':
                    return `
                        <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M4 2a2 2 0 00-2 2v11a3 3 0 106 0V4a2 2 0 00-2-2H4zm1 14a1 1 0 100-2 1 1 0 000 2zm5-1.757l4.9-4.9a2 2 0 000-2.828L13.485 5.1a2 2 0 00-2.828 0L10 5.757v8.486zM16 18H9.071l6-6H16a2 2 0 012 2v2a2 2 0 01-2 2z" clip-rule="evenodd" />
                        </svg>
                    `;
                case 'utensils':
                    return `
                        <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                        </svg>
                    `;
                case 'camera':
                    return `
                        <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                    `;
                case 'bullhorn':
                    return `
                        <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z" />
                        </svg>
                    `;
                case 'image':
                    return `
                        <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                    `;
                case 'credit-card':
                    return `
                        <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" />
                        </svg>
                    `;
                case 'users':
                    return `
                        <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                        </svg>
                    `;
                default:
                    return `
                        <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1H8a3 3 0 00-3 3v1.5a1.5 1.5 0 01-3 0V6z" clip-rule="evenodd" />
                            <path d="M6 12A2 2 0 018 10h8a2 2 0 012 2v5a2 2 0 01-2 2H8a2 2 0 01-2-2v-5z" />
                        </svg>
                    `;
            }
        }

        // Helper function to render file type icon
        function renderFileTypeIcon(fileType, extension) {
            switch(fileType) {
                case 'image':
                    return `
                        <svg class="h-8 w-8 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                    `;
                case 'document':
                    return `
                        <svg class="h-8 w-8 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
                        </svg>
                    `;
                case 'video':
                    return `
                        <svg class="h-8 w-8 text-purple-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
                        </svg>
                    `;
                case 'audio':
                    return `
                        <svg class="h-8 w-8 text-orange-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3" />
                        </svg>
                    `;
                case 'design':
                    return `
                        <svg class="h-8 w-8 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" />
                        </svg>
                    `;
                default:
                    return `
                        <svg class="h-8 w-8 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                        </svg>
                    `;
            }
        }

        // Setup event listeners
        function setupEventListeners() {
            // View mode switcher
            elements.gridViewBtn.addEventListener('click', () => {
                state.viewMode = 'grid';
                elements.gridViewBtn.classList.add('bg-gray-100', 'text-gray-800');
                elements.gridViewBtn.classList.remove('text-gray-600');
                elements.listViewBtn.classList.remove('bg-gray-100', 'text-gray-800');
                elements.listViewBtn.classList.add('text-gray-600');
                updateView();
            });
            
            elements.listViewBtn.addEventListener('click', () => {
                state.viewMode = 'list';
                elements.listViewBtn.classList.add('bg-gray-100', 'text-gray-800');
                elements.listViewBtn.classList.remove('text-gray-600');
                elements.gridViewBtn.classList.remove('bg-gray-100', 'text-gray-800');
                elements.gridViewBtn.classList.add('text-gray-600');
                updateView();
            });
            
            // Sort controls
            elements.sortBySelect.addEventListener('change', () => {
                state.sortBy = elements.sortBySelect.value;
                updateView();
            });
            
            elements.sortOrderBtn.addEventListener('click', () => {
                state.sortOrder = state.sortOrder === 'asc' ? 'desc' : 'asc';
                
                if (state.sortOrder === 'asc') {
                    elements.sortOrderBtn.innerHTML = `
                        <svg class="h-5 w-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12" />
                        </svg>
                    `;
                } else {
                    elements.sortOrderBtn.innerHTML = `
                        <svg class="h-5 w-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4" />
                        </svg>
                    `;
                }
                
                updateView();
            });
            
            // Delete button
            elements.deleteBtn.addEventListener('click', () => {
                if (!elements.deleteBtn.disabled) {
                    deleteAssets();
                }
            });
            
            // Search input
            elements.searchInput.addEventListener('input', () => {
                state.searchTerm = elements.searchInput.value;
                updateView();
            });
            
            // Upload buttons
            elements.uploadBtn.addEventListener('click', showUploadModal);
            elements.emptyUploadBtn.addEventListener('click', showUploadModal);
            
            // Upload modal buttons
            elements.confirmUploadBtn.addEventListener('click', uploadAsset);
            elements.cancelUploadBtn.addEventListener('click', closeUploadModal);
            
            // Browse button (simulated)
            elements.browseBtn.addEventListener('click', () => {
                showUploadStatus('This would open a file browser in a real application', 'info');
            });
            
            // Asset detail modal close button
            elements.closeDetailBtn.addEventListener('click', closeAssetDetail);
            
            // Select all checkbox
            if (elements.selectAll) {
                elements.selectAll.addEventListener('change', () => {
                    const filteredAssets = getFilteredAssets();
                    
                    if (elements.selectAll.checked) {
                        state.selectedAssets = filteredAssets.map(asset => asset.id);
                    } else {
                        state.selectedAssets = [];
                    }
                    
                    updateView();
                });
            }
            
            // Breadcrumb navigation
            elements.breadcrumbAll.addEventListener('click', (e) => {
                e.preventDefault();
                state.activeFolder = null;
                state.activeSubfolder = null;
                state.activeDetailFolder = null;
                updateView();
            });
            
            elements.breadcrumbMain.addEventListener('click', (e) => {
                e.preventDefault();
                const folderId = elements.breadcrumbMain.getAttribute('data-folder');
                if (folderId) {
                    state.activeFolder = folderId;
                    state.activeSubfolder = null;
                    state.activeDetailFolder = null;
                    updateView();
                }
            });
            
            elements.breadcrumbSub.addEventListener('click', (e) => {
                e.preventDefault();
                const subfolderId = elements.breadcrumbSub.getAttribute('data-subfolder');
                if (subfolderId) {
                    state.activeSubfolder = subfolderId;
                    state.activeDetailFolder = null;
                    updateView();
                }
            });
            
            // Close modals when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target === elements.uploadModal) {
                    closeUploadModal();
                }
                
                if (e.target === elements.assetDetailModal) {
                    closeAssetDetail();
                }
            });
        }

        // Initialize the application
        init();
    </script>
</body>
</html><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restaurant Digital Asset Manager</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <style>
        .modal {
            display: none;
            position: fixed;
            z-index: 50;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }
        
        .modal.active {
            display: flex;
        }
        
        .folder-nav {
            overflow-y: auto;
            max-height: calc(100vh - 64px);
        }
        
        .asset-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
        }
        
        .truncate-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        @media (max-width: 768px) {
            .folder-structure {
                display: none;
            }
            
            .mobile-menu-active .folder-structure {
                display: block;
                position: fixed;
                top: 64px;
                left: 0;
                width: 100%;
                height: calc(100vh - 64px);
                z-index: 40;
            }
        }
    </style>
</head>
<body class="bg-gray-100 h-screen flex flex-col overflow-hidden">
    <!-- Header -->
    <header class="bg-white border-b border-gray-200 px-4 py-3 flex items-center">
        <div class="flex items-center">
            <svg class="h-8 w-8 text-blue-600 mr-2" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" fill="currentColor"/>
                <path d="M14 17H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z" fill="currentColor"/>
            </svg>
            <div class="text-lg font-medium text-gray-900 hidden md:block">Restaurant Digital Asset Manager</div>
            <div class="text-lg font-medium text-gray-900 md:hidden">Restaurant DAM</div>
        </div>
        <div class="flex-grow mx-4">
            <div class="relative">
                <input 
                    type="text" 
                    id="search-input"
                    placeholder="Search assets by name, description or tags" 
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                >
                <button class="absolute right-2 top-2 text-gray-500">
                    <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                </button>
            </div>
        </div>
        <div class="flex items-center space-x-4">
            <button 
                id="upload-btn"
                class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
            >
                <svg class="h-4 w-4 mr-1" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                </svg>
                Upload
            </button>
            <div class="h-8 w-8 bg-blue-600 rounded-full text-white flex items-center justify-center font-bold">
                U
            </div>
            <button id="mobile-menu-btn" class="md:hidden">
                <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>
        </div>
    </header>

    <!-- Main content -->
    <div class="flex flex-1 overflow-hidden">
        <!-- Folder structure - Main folders -->
        <div class="folder-structure w-48 bg-white border-r border-gray-200 flex flex-col">
            <nav class="folder-nav flex-1 pt-3 pb-4">
                <div class="px-3 mb-2 text-xs font-semibold text-gray-500 uppercase tracking-wider">
                    Main Categories
                </div>
                <ul id="main-folders" class="mt-2 mb-3">
                    <!-- Main folders will be populated here -->
                </ul>
            </nav>
        </div>
        
        <!-- Folder structure - Subfolders -->
        <div id="subfolder-nav" class="folder-structure w-56 bg-gray-50 border-r border-gray-200 flex flex-col">
            <div class="h-12 flex items-center px-4 border-b border-gray-200">
                <h2 id="active-main-folder" class="text-sm font-medium text-gray-900"></h2>
            </div>
            <nav class="folder-nav flex-1 pt-3 pb-4">
                <ul id="subfolders" class="mt-2 mb-3">
                    <!-- Subfolders will be populated here -->
                </ul>
            </nav>
        </div>
        
        <!-- Folder structure - Detail folders -->
        <div id="detail-folder-nav" class="folder-structure w-48 bg-gray-50 border-r border-gray-200 flex flex-col">
            <div class="h-12 flex items-center px-4 border-b border-gray-200">
                <h2 id="active-subfolder" class="text-sm font-medium text-gray-900"></h2>
            </div>
            <nav class="folder-nav flex-1 pt-3 pb-4">
                <ul id="detail-folders" class="mt-2 mb-3">
                    <!-- Detail folders will be populated here -->
                </ul>
            </nav>
        </div>

        <!-- Main content area -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Action toolbar -->
            <div class="bg-white p-4 border-b border-gray-200 flex items-center">
                <div id="current-folder-path" class="text-lg font-medium text-gray-800">
                    All Assets
                </div>
                <div class="ml-auto flex space-x-3">
                    <div class="flex border border-gray-300 rounded-md">
                        <button id="grid-view-btn" class="px-3 py-1.5 bg-gray-100 text-gray-800">
                            <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
                            </svg>
                        </button>
                        <button id="list-view-btn" class="px-3 py-1.5 text-gray-600">
                            <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16" />
                            </svg>
                        </button>
                    </div>
                    
                    <select
                        id="sort-by"
                        class="px-3 py-1.5 border border-gray-300 rounded-md text-sm"
                    >
                        <option value="date">Sort by Date</option>
                        <option value="name">Sort by Name</option>
                        <option value="type">Sort by Type</option>
                    </select>
                    
                    <button
                        id="sort-order"
                        class="px-3 py-1.5 border border-gray-300 rounded-md"
                    >
                        <svg class="h-5 w-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12" />
                        </svg>
                    </button>

                    <button 
                        id="delete-btn"
                        class="px-3 py-1.5 rounded text-sm bg-gray-200 text-gray-400 cursor-not-allowed"
                        disabled
                    >
                        <div class="flex items-center">
                            <svg class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                            </svg>
                            Delete
                        </div>
                    </button>
                </div>
            </div>

            <!-- Asset display area -->
            <div id="asset-container" class="flex-1 overflow-y-auto p-6 bg-gray-50">
                <div id="empty-state" class="text-center py-12 hidden">
                    <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
                    </svg>
                    <h3 class="mt-2 text-sm font-medium text-gray-900">No assets found</h3>
                    <p class="mt-1 text-sm text-gray-500" id="empty-state-message">
                        Get started by adding assets to this folder
                    </p>
                    <div class="mt-6">
                        <button
                            id="empty-upload-btn"
                            class="inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                        >
                            <svg class="-ml-1 mr-2 h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                            </svg>
                            Upload an asset
                        </button>
                    </div>
                </div>
                <div id="grid-view" class="asset-grid">
                    <!-- Assets in grid view will be populated here -->
                </div>
                <div id="list-view" class="hidden">
                    <div class="bg-white shadow overflow-hidden border-b border-gray-200 rounded-lg">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-8">
                                        <input
                                            type="checkbox"
                                            id="select-all"
                                            class="h-4 w-4 text-blue-600 border-gray-300 rounded"
                                        >
                                    </th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Asset
                                    </th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Type
                                    </th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Tags
                                    </th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Date Modified
                                    </th>
                                    <th scope="col" class="relative px-6 py-3">
                                        <span class="sr-only">Actions</span>
                                    </th>
                                </tr>
                            </thead>
                            <tbody id="asset-list" class="bg-white divide-y divide-gray-200">
                                <!-- Assets in list view will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Status message -->
    <div id="status-message" class="fixed bottom-4 right-4 px-4 py-2 rounded-lg shadow-lg bg-green-600 text-white hidden"></div>

    <!-- Storage status banner -->
    <div class="fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-white border border-gray-200 px-4 py-2 rounded-lg shadow-lg z-40">
        <div class="flex items-center text-sm">
            <svg class="h-5 w-5 text-green-500 mr-2" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
            </svg>
            <span>Changes are being saved to browser storage</span>
        </div>
    </div>

    <!-- Upload Asset Modal -->
    <div id="upload-modal" class="modal">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl">
            <div class="px-6 py-4 border-b border-gray-200">
                <h3 class="text-lg font-medium text-gray-900">Upload New Asset</h3>
            </div>
            <div class="p-6">
                <div class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="asset-name" class="block text-sm font-medium text-gray-700">Asset Name *</label>
                            <input
                                type="text"
                                id="asset-name"
                                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                                required
                            >
                        </div>
                        <div>
                            <label for="asset-type" class="block text-sm font-medium text-gray-700">Asset Type</label>
                            <select
                                id="asset-type"
                                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                            >
                                <option value="image">Image</option>
                                <option value="document">Document</option>
                                <option value="video">Video</option>
                                <option value="audio">Audio</option>
                                <option value="design">Design File</option>
                            </select>
                        </div>
                    </div>
                    
                    <div>
                        <label for="asset-description" class="block text-sm font-medium text-gray-700">Description</label>
                        <textarea
                            id="asset-description"
                            rows="3"
                            class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                        ></textarea>
                    </div>
                    
                    <div>
                        <label for="asset-tags" class="block text-sm font-medium text-gray-700">Tags (comma separated)</label>
                        <input
                            type="text"
                            id="asset-tags"
                            class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                            placeholder="menu, logo, food, summer"
                        >
                    </div>
                    
                    <div>
                        <label for="asset-path" class="block text-sm font-medium text-gray-700">File Path *</label>
                        <div class="mt-1 flex rounded-md shadow-sm">
                            <input
                                type="text"
                                id="asset-path"
                                class="flex-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                                placeholder="/path/to/your/file.ext"
                                required
                            >
                            <button
                                type="button"
                                id="browse-btn"
                                class="ml-2 inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
                            >
                                Browse
                            </button>
                        </div>
                        <p class="mt-1 text-xs text-gray-500">Enter the full path where the file is stored</p>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label for="folder-select" class="block text-sm font-medium text-gray-700">Main Folder</label>
                            <select
                                id="folder-select"
                                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                            >
                                <!-- Folders will be populated here -->
                            </select>
                        </div>
                        
                        <div>
                            <label for="subfolder-select" class="block text-sm font-medium text-gray-700">Subfolder</label>
                            <select
                                id="subfolder-select"
                                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                                disabled
                            >
                                <option value="">Select subfolder</option>
                            </select>
                        </div>
                        
                        <div>
                            <label for="detail-folder-select" class="block text-sm font-medium text-gray-700">Detail Folder</label>
                            <select
                                id="detail-folder-select"
                                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                                disabled
                            >
                                <option value="">Select detail folder</option>
                            </select>
                        </div>
                    </div>

                    <div id="upload-status" class="mt-4 px-4 py-3 rounded-md hidden"></div>
                </div>
            </div>
            <div class="px-6 py-4 border-t border-gray-200 flex justify-end space-x-3">
                <button
                    type="button"
                    id="cancel-upload-btn"
                    class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
                >
                    Cancel
                </button>
                <button
                    type="button"
                    id="confirm-upload-btn"
                    class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
                >
                    Upload Asset
                </button>
            </div>
        </div>
    </div>

    <!-- Asset Detail Modal -->
    <div id="asset-detail-modal" class="modal">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col">
            <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center">
                <h3 class="text-lg font-medium text-gray-900">Asset Details</h3>
                <button id="close-detail-btn" class="text-gray-400 hover:text-gray-500">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="flex-1 overflow-y-auto p-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <div class="bg-gray-100 rounded-lg p-4 flex items-center justify-center h-80">
                            <img 
                                id="detail-thumbnail" 
                                src="" 
                                alt=""
                                class="max-h-full max-w-full object-contain"
                            >
                        </div>
                        
                        <div class="mt-6">
                            <h3 class="text-sm font-medium text-gray-700">Asset Path Information</h3>
                            <p class="mt-2 text-sm text-gray-600">Path: <span id="detail-path" class="font-mono text-gray-800"></span></p>
                            
                            <div class="mt-4 bg-gray-50 p-3 rounded-md border border-gray-200">
                                <h4 class="text-xs font-medium text-gray-700 mb-1">Full path for reference:</h4>
                                <div id="detail-full-path" class="font-mono text-xs text-gray-600 break-all"></div>
                            </div>
                        </div>
                    </div>

                    <div>
                        <div class="flex items-start mb-4">
                            <div class="mr-3 mt-1" id="detail-type-icon"></div>
                            <div>
                                <h2 id="detail-name" class="text-xl font-bold text-gray-900"></h2>
                                <p id="detail-file-info" class="text-sm text-gray-500"></p>
                            </div>
                        </div>

                        <div class="space-y-6">
                            <div>
                                <h3 class="text-sm font-medium text-gray-700">Description</h3>
                                <p id="detail-description" class="mt-1 text-sm text-gray-600"></p>
                            </div>
                            
                            <div>
                                <h3 class="text-sm font-medium text-gray-700">Tags</h3>
                                <div id="detail-tags" class="flex flex-wrap gap-2 mt-2"></div>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <h3 class="text-sm font-medium text-gray-700">Created</h3>
                                    <p id="detail-created" class="mt-1 text-sm text-gray-600"></p>
                                </div>
                                <div>
                                    <h3 class="text-sm font-medium text-gray-700">Modified</h3>
                                    <p id="detail-modified" class="mt-1 text-sm text-gray-600"></p>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <h3 class="text-sm font-medium text-gray-700">Created By</h3>
                                    <p id="detail-creator" class="mt-1 text-sm text-gray-600"></p>
                                </div>
                                <div id="detail-dimensions-container" class="hidden">
                                    <h3 class="text-sm font-medium text-gray-700">Dimensions</h3>
                                    <p id="detail-dimensions" class="mt-1 text-sm text-gray-600"></p>
                                </div>
                                <div id="detail-duration-container" class="hidden">
                                    <h3 class="text-sm font-medium text-gray-700">Duration</h3>
                                    <p id="detail-duration" class="mt-1 text-sm text-gray-600"></p>
                                </div>
                            </div>
                            
                            <div>
                                <h3 class="text-sm font-medium text-gray-700">Location</h3>
                                <div id="detail-location" class="mt-1 flex items-center space-x-2 text-sm text-gray-600"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="px-6 py-4 border-t border-gray-200">
                <div class="flex justify-between">
                    <div>
                        <button class="inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                            <svg class="-ml-1 mr-2 h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
                            </svg>
                            Edit
                        </button>
                    </div>
                    <div class="flex space-x-3">
                        <button class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50">
                            <svg class="h-4 w-4 mr-1 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z" />
                            </svg>
                            Share
                        </button>
                        <button class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                            <svg class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                            </svg>
                            Download
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Main folder structure
        const mainFolders = [
            { id: 'brand-assets', name: 'BRAND ASSETS', icon: 'palette' },
            { id: 'menus', name: 'MENUS', icon: 'utensils' },
            { id: 'menu-content', name: 'MENU CONTENT', icon: 'camera' },
            { id: 'marketing-materials', name: 'MARKETING MATERIALS', icon: 'bullhorn' },
            { id: 'digital-media', name: 'DIGITAL MEDIA', icon: 'image' },
            { id: 'pos-resources', name: 'POS & SYSTEM RESOURCES', icon: 'credit-card' },
            { id: 'customer-experience', name: 'CUSTOMER EXPERIENCE', icon: 'users' }
        ];

        // Subfolder structure for each main folder
        const subFolders = {
            'brand-assets': [
                { id: 'logo-files', name: 'Logo Files', subfolders: ['Primary Logos', 'Secondary Marks', 'Logo Variations', 'Icons & Favicons'] },
                { id: 'brand-guidelines', name: 'Brand Guidelines', subfolders: ['Color Palette', 'Typography', 'Brand Voice & Messaging'] },
                { id: 'restaurant-identity', name: 'Restaurant Identity', subfolders: ['Exterior Photos', 'Interior Photos', 'Signage', 'Staff Uniforms'] }
            ],
            'menus': [
                { id: 'current-menus', name: 'Current Menus', subfolders: ['Main Menu', 'Beverage Menu', 'Kids Menu', 'Dessert Menu'] },
                { id: 'seasonal-menus', name: 'Seasonal Menus', subfolders: ['Spring', 'Summer', 'Fall', 'Winter'] },
                { id: 'specialty-menus', name: 'Specialty Menus', subfolders: ['Happy Hour', 'Brunch', 'Catering', 'Private Events'] },
                { id: 'digital-menu-files', name: 'Digital Menu Files', subfolders: ['PDF Menus', 'QR Code Menus', 'Online Ordering Menus'] },
                { id: 'menu-archives', name: 'Menu Archives', subfolders: ['2025', '2024', '2023'] }
            ],
            'menu-content': [
                { id: 'food-photography', name: 'Food Photography', subfolders: ['Appetizers', 'Main Courses', 'Desserts', 'Specials'] },
                { id: 'menu-design-files', name: 'Menu Design Files', subfolders: ['Templates', 'Menu Backgrounds', 'Layout Files'] },
                { id: 'menu-copy', name: 'Menu Copy', subfolders: ['Item Descriptions', 'Dietary Information', 'Ingredient Lists'] },
                { id: 'beverage-program', name: 'Beverage Program', subfolders: ['Cocktail Photos', 'Wine List Content', 'Beer Program'] }
            ],
            'marketing-materials': [
                { id: 'print-materials', name: 'Print Materials', subfolders: ['Flyers & Posters', 'Table Tents', 'Business Cards', 'Gift Cards'] },
                { id: 'digital-campaigns', name: 'Digital Campaigns', subfolders: ['Email Templates', 'Banner Ads', 'Promotional Graphics'] },
                { id: 'social-media-content', name: 'Social Media Content', subfolders: ['Facebook', 'Instagram', 'Twitter/X', 'TikTok', 'Content Calendar Templates'] },
                { id: 'loyalty-rewards', name: 'Loyalty & Rewards', subfolders: ['Program Graphics', 'Membership Materials'] },
                { id: 'seasonal-promotions', name: 'Seasonal Promotions', subfolders: ['Holiday Graphics', 'Seasonal Campaigns'] }
            ],
            'digital-media': [
                { id: 'photography', name: 'Photography', subfolders: ['Food Gallery', 'Ambiance & Atmosphere', 'Staff & Team', 'Events & Gatherings'] },
                { id: 'video-content', name: 'Video Content', subfolders: ['Promotional Videos', 'Behind-the-Scenes', 'Chef Interviews', 'Food Preparation'] },
                { id: 'audio', name: 'Audio', subfolders: ['Restaurant Playlists', 'On-Hold Music', 'Radio Spots'] },
                { id: 'stock-resources', name: 'Stock Resources', subfolders: ['Licensed Stock Photos', 'Purchased Templates', 'Font Files'] }
            ],
            'pos-resources': [
                { id: 'microsale-assets', name: 'MicroSale Assets', subfolders: ['Button Icons', 'Screen Backgrounds', 'Custom Receipt Templates'] },
                { id: 'digital-displays', name: 'Digital Displays', subfolders: ['Customer-Facing Display Content', 'Kitchen Display Graphics', 'Drive-thru Display Assets'] },
                { id: 'online-ordering', name: 'Online Ordering', subfolders: ['BiteHeist Menu Photos', 'Item Descriptions', 'Delivery Zone Maps'] },
                { id: 'qr-codes', name: 'QR Codes', subfolders: ['Menu QR Codes', 'Payment QR Codes', 'Feedback QR Codes'] }
            ],
            'customer-experience': [
                { id: 'website-content', name: 'Website Content', subfolders: ['Homepage Assets', 'About Us Content', 'Location & Hours', 'Photo Gallery'] },
                { id: 'customer-communication', name: 'Customer Communication', subfolders: ['Email Templates', 'SMS Templates', 'Feedback Forms'] },
                { id: 'digital-menus', name: 'Digital Menus', subfolders: ['Online Menu PDFs', 'QR Menu Design', 'Interactive Menu Content'] },
                { id: 'table-guest-touchpoints', name: 'Table/Guest Touchpoints', subfolders: ['Table Cards', 'Check Presenters', 'Guest Wifi Cards'] }
            ]
        };

        // Sample asset types
        const assetTypes = [
            { id: 'image', name: 'Image', extensions: ['jpg', 'png', 'webp'] },
            { id: 'document', name: 'Document', extensions: ['pdf', 'docx'] },
            { id: 'design', name: 'Design File', extensions: ['psd', 'ai', 'sketch'] },
            { id: 'video', name: 'Video', extensions: ['mp4', 'mov'] },
            { id: 'audio', name: 'Audio', extensions: ['mp3', 'wav'] }
        ];

        // Sample data for assets
        let assets = [
            {
                id: '1',
                name: 'Primary Logo Full Color',
                description: 'Main restaurant logo on white background',
                type: 'image',
                extension: 'png',
                size: '2.4 MB',
                dimensions: '2000 x 800 px',
                path: '/BRAND ASSETS/Logo Files/Primary Logos/Primary_Logo_Full_Color.png',
                folder: 'brand-assets',
                subfolder: 'logo-files',
                detailFolder: 'Primary Logos',
                tags: ['logo', 'branding', 'primary'],
                dateCreated: '2025-01-15',
                dateModified: '2025-01-15',
                thumbnail: 'https://via.placeholder.com/300/4F46E5/FFFFFF?text=LOGO',
                createdBy: 'Brand Manager'
            },
            {
                id: '2',
                name: 'Menu Spring 2025',
                description: 'Spring menu PDF for print and digital distribution',
                type: 'document',
                extension: 'pdf',
                size: '3.8 MB',
                path: '/MENUS/Seasonal Menus/Spring/Menu_Spring_2025.pdf',
                folder: 'menus',
                subfolder: 'seasonal-menus',
                detailFolder: 'Spring',
                tags: ['menu', 'spring', '2025', 'seasonal'],
                dateCreated: '2025-03-01',
                dateModified: '2025-03-05',
                thumbnail: 'https://via.placeholder.com/300/DC2626/FFFFFF?text=PDF',
                createdBy: 'Marketing Director'
            },
            {
                id: '3',
                name: 'Signature Burger Hero Shot',
                description: 'High-res photograph of signature burger',
                type: 'image',
                extension: 'jpg',
                size: '5.2 MB',
                dimensions: '4000 x 3000 px',
                path: '/MENU CONTENT/Food Photography/Main Courses/Signature_Burger_Hero.jpg',
                folder: 'menu-content',
                subfolder: 'food-photography',
                detailFolder: 'Main Courses',
                tags: ['food', 'burger', 'photography', 'hero image'],
                dateCreated: '2025-02-10',
                dateModified: '2025-02-10',
                thumbnail: 'https://via.placeholder.com/300/065F46/FFFFFF?text=FOOD',
                createdBy: 'Food Photographer'
            },
            {
                id: '4',
                name: 'Instagram Summer Promotion',
                description: 'Promotional post for summer special menu',
                type: 'image',
                extension: 'jpg',
                size: '1.8 MB',
                dimensions: '1080 x 1080 px',
                path: '/MARKETING MATERIALS/Social Media Content/Instagram/Summer_Promo_Post.jpg',
                folder: 'marketing-materials',
                subfolder: 'social-media-content',
                detailFolder: 'Instagram',
                tags: ['social media', 'instagram', 'summer', 'promotion'],
                dateCreated: '2025-06-01',
                dateModified: '2025-06-02',
                thumbnail: 'https://via.placeholder.com/300/0284C7/FFFFFF?text=SOCIAL',
                createdBy: 'Social Media Manager'
            },
            {
                id: '5',
                name: 'Chef Interview - Summer Menu',
                description: 'Video interview with chef discussing summer menu items',
                type: 'video',
                extension: 'mp4',
                size: '128 MB',
                duration: '3:45',
                path: '/DIGITAL MEDIA/Video Content/Chef Interviews/Chef_Summer_Menu_Interview.mp4',
                folder: 'digital-media',
                subfolder: 'video-content',
                detailFolder: 'Chef Interviews',
                tags: ['video', 'chef', 'interview', 'summer menu'],
                dateCreated: '2025-05-15',
                dateModified: '2025-05-18',
                thumbnail: 'https://via.placeholder.com/300/7C3AED/FFFFFF?text=VIDEO',
                createdBy: 'Content Producer'
            },
            {
                id: '6',
                name: 'POS Button Icons Set',
                description: 'Full set of custom icons for MicroSale POS system',
                type: 'design',
                extension: 'ai',
                size: '8.4 MB',
                path: '/POS & SYSTEM RESOURCES/MicroSale Assets/Button Icons/POS_Button_Icons_Set.ai',
                folder: 'pos-resources',
                subfolder: 'microsale-assets',
                detailFolder: 'Button Icons',
                tags: ['pos', 'icons', 'microsale', 'buttons'],
                dateCreated: '2025-01-30',
                dateModified: '2025-02-05',
                thumbnail: 'https://via.placeholder.com/300/EA580C/FFFFFF?text=ICONS',
                createdBy: 'UI Designer'
            },
            {
                id: '7',
                name: 'Website Hero Banner',
                description: 'Main hero image for restaurant website homepage',
                type: 'image',
                extension: 'jpg',
                size: '4.6 MB',
                dimensions: '2400 x 1200 px',
                path: '/CUSTOMER EXPERIENCE/Website Content/Homepage Assets/Homepage_Hero_Banner.jpg',
                folder: 'customer-experience',
                subfolder: 'website-content',
                detailFolder: 'Homepage Assets',
                tags: ['website', 'hero', 'banner', 'homepage'],
                dateCreated: '2025-04-10',
                dateModified: '2025-04-12',
                thumbnail: 'https://via.placeholder.com/300/2563EB/FFFFFF?text=WEB',
                createdBy: 'Web Designer'
            },
            {
                id: '8',
                name: 'Brand Style Guide 2025',
                description: 'Comprehensive brand guidelines document',
                type: 'document',
                extension: 'pdf',
                size: '12.2 MB',
                path: '/BRAND ASSETS/Brand Guidelines/Brand_Style_Guide_2025.pdf',
                folder: 'brand-assets',
                subfolder: 'brand-guidelines',
                detailFolder: '',
                tags: ['brand', 'guidelines', 'style guide'],
                dateCreated: '2025-01-05',
                dateModified: '2025-01-10',
                thumbnail: 'https://via.placeholder.com/300/DC2626/FFFFFF?text=PDF',
                createdBy: 'Brand Director'
            }
        ];

        // Application state
        let state = {
            activeFolder: null,
            activeSubfolder: null,
            activeDetailFolder: null,
            searchTerm: '',
            selectedAssets: [],
            viewMode: 'grid',
            sortBy: 'date',
            sortOrder: 'desc',
            currentAsset: null
        };

        // DOM Elements
        const elements = {
            mainFoldersList: document.getElementById('main-folders'),
            subfoldersList: document.getElementById('subfolders'),
            detailFoldersList: document.getElementById('detail-folders'),
            activeMainFolder: document.getElementById('active-main-folder'),
            activeSubfolder: document.getElementById('active-subfolder'),
            currentFolderPath: document.getElementById('current-folder-path'),
            gridView: document.getElementById('grid-view'),
            listView: document.getElementById('list-view'),
            assetList: document.getElementById('asset-list'),
            emptyState: document.getElementById('empty-state'),
            emptyStateMessage: document.getElementById('empty-state-message'),
            gridViewBtn: document.getElementById('grid-view-btn'),
            listViewBtn: document.getElementById('list-view-btn'),
            sortBySelect: document.getElementById('sort-by'),
            sortOrderBtn: document.getElementById('sort-order'),
            deleteBtn: document.getElementById('delete-btn'),
            searchInput: document.getElementById('search-input'),
            uploadBtn: document.getElementById('upload-btn'),
            emptyUploadBtn: document.getElementById('empty-upload-btn'),
            uploadModal: document.getElementById('upload-modal'),
            confirmUploadBtn: document.getElementById('confirm-upload-btn'),
            cancelUploadBtn: document.getElementById('cancel-upload-btn'),
            assetDetailModal: document.getElementById('asset-detail-modal'),
            closeDetailBtn: document.getElementById('close-detail-btn'),
            statusMessage: document.getElementById('status-message'),
            assetName: document.getElementById('asset-name'),
            assetDescription: document.getElementById('asset-description'),
            assetType: document.getElementById('asset-type'),
            assetTags: document.getElementById('asset-tags'),
            assetPath: document.getElementById('asset-path'),
            folderSelect: document.getElementById('folder-select'),
            subfolderSelect: document.getElementById('subfolder-select'),
            detailFolderSelect: document.getElementById('detail-folder-select'),
            browseBtn: document.getElementById('browse-btn'),
            uploadStatus: document.getElementById('upload-status'),
            selectAll: document.getElementById('select-all'),
            mobileMenuBtn: document.getElementById('mobile-menu-btn'),
            detailThumbnail: document.getElementById('detail-thumbnail'),
            detailPath: document.getElementById('detail-path'),
            detailFullPath: document.getElementById('detail-full-path'),
            detailTypeIcon: document.getElementById('detail-type-icon'),
            detailName: document.getElementById('detail-name'),
            detailFileInfo: document.getElementById('detail-file-info'),
            detailDescription: document.getElementById('detail-description'),
            detailTags: document.getElementById('detail-tags'),
            detailCreated: document.getElementById('detail-created'),
            detailModified: document.getElementById('detail-modified'),
            detailCreator: document.getElementById('detail-creator'),
            detailDimensionsContainer: document.getElementById('detail-dimensions-container'),
            detailDimensions: document.getElementById('detail-dimensions'),
            detailDurationContainer: document.getElementById('detail-duration-container'),
            detailDuration: document.getElementById('detail-duration'),
            detailLocation: document.getElementById('detail-location'),
            subfolderNav: document.getElementById('subfolder-nav'),
            detailFolderNav: document.getElementById('detail-folder-nav')
        };

        // Initialize application
        function init() {
            // Load saved assets from localStorage
            loadSavedAssets();
            
            // Render main folders
            renderMainFolders();
            
            // Fill folder selects in upload modal
            populateFolderSelects();
            
            // Add event listeners
            setupEventListeners();
            
            // Initial render
            updateView();
        }

        // Load saved assets from localStorage
        function loadSavedAssets() {
            try {
                const savedAssets = localStorage.getItem('restaurantDamAssets');
                if (savedAssets) {
                    assets = JSON.parse(savedAssets);
                } else {
                    // If no saved assets, save the initial ones
                    localStorage.setItem('restaurantDamAssets', JSON.stringify(assets));
                }
            } catch (error) {
                console.error('Error loading saved assets:', error);
            }
        }

        // Save assets to localStorage
        function saveAssets() {
            try {
                localStorage.setItem('restaurantDamAssets', JSON.stringify(assets));
                return true;
            } catch (error) {
                console.error('Error saving assets:', error);
                return false;
            }
        }

        // Render main folders
        function renderMainFolders() {
            elements.mainFoldersList.innerHTML = '';
            
            mainFolders.forEach(folder => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <button
                        class="flex items-center px-3 py-2 text-sm rounded-md w-full ${
                            state.activeFolder === folder.id 
                                ? 'bg-blue-100 text-blue-700' 
                                : 'text-gray-700 hover:bg-gray-100'
                        }"
                        data-folder="${folder.id}"
                    >
                        <span class="mr-2 text-gray-500">
                            ${renderFolderIcon(folder.icon)}
                        </span>
                        <span class="truncate">${folder.name}</span>
                    </button>
                `;
                
                elements.mainFoldersList.appendChild(li);
                
                // Add click event listener
                const button = li.querySelector('button');
                button.addEventListener('click', () => {
                    state.activeFolder = folder.id;
                    state.activeSubfolder = null;
                    state.activeDetailFolder = null;
                    state.selectedAssets = [];
                    updateView();
                });
            });
        }

        // Render subfolders
        function renderSubfolders() {
            elements.subfoldersList.innerHTML = '';
            
            if (!state.activeFolder || !subFolders[state.activeFolder]) {
                elements.subfolderNav.classList.add('hidden');
                return;
            }
            
            elements.subfolderNav.classList.remove('hidden');
            elements.activeMainFolder.textContent = mainFolders.find(f => f.id === state.activeFolder)?.name || '';
            
            subFolders[state.activeFolder].forEach(subfolder => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <button
                        class="flex items-center px-3 py-2 text-sm rounded-md w-full ${
                            state.activeSubfolder === subfolder.id 
                                ? 'bg-blue-100 text-blue-700' 
                                : 'text-gray-700 hover:bg-gray-100'
                        }"
                        data-subfolder="${subfolder.id}"
                    >
                        <svg class="h-4 w-4 mr-2 text-gray-500" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1H8a3 3 0 00-3 3v1.5a1.5 1.5 0 01-3 0V6z" clip-rule="evenodd" />
                            <path d="M6 12A2 2 0 018 10h8a2 2 0 012 2v5a2 2 0 01-2 2H8a2 2 0 01-2-2v-5z" />
                        </svg>
                        <span class="truncate">${subfolder.name}</span>
                    </button>
                `;
                
                elements.subfoldersList.appendChild(li);
                
                // Add click event listener
                const button = li.querySelector('button');
                button.addEventListener('click', () => {
                    state.activeSubfolder = subfolder.id;
                    state.activeDetailFolder = null;
                    state.selectedAssets = [];
                    updateView();
                });
            });
        }

        // Render detail folders
        function renderDetailFolders() {
            elements.detailFoldersList.innerHTML = '';
            
            if (!state.activeFolder || !state.activeSubfolder) {
                elements.detailFolderNav.classList.add('hidden');
                return;
            }
            
            const subfolder = subFolders[state.activeFolder]?.find(sf => sf.id === state.activeSubfolder);
            
            if (!subfolder || !subfolder.subfolders || subfolder.subfolders.length === 0) {
                elements.detailFolderNav.classList.add('hidden');
                return;
            }
            
            elements.detailFolderNav.classList.remove('hidden');
            elements.activeSubfolder.textContent = subfolder.name;
            
            subfolder.subfolders.forEach(detailFolder => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <button
                        class="flex items-center px-3 py-2 text-sm rounded-md w-full ${
                            state.activeDetailFolder === detailFolder 
                                ? 'bg-blue-100 text-blue-700' 
                                : 'text-gray-700 hover:bg-gray-100'
                        }"
                        data-detail-folder="${detailFolder}"
                    >
                        <svg class="h-4 w-4 mr-2 text-gray-500" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1H8a3 3 0 00-3 3v1.5a1.5 1.5 0 01-3 0V6z" clip-rule="evenodd" />
                            <path d="M6 12A2 2 0 018 10h8a2 2 0 012 2v5a2 2 0 01-2 2H8a2 2 0 01-2-2v-5z" />
                        </svg>
                        <span class="truncate">${detailFolder}</span>
                    </button>
                `;
                
                elements.detailFoldersList.appendChild(li);
                
                // Add click event listener
                const button = li.querySelector('button');
                button.addEventListener('click', () => {
                    state.activeDetailFolder = detailFolder;
                    state.selectedAssets = [];
                    updateView();
                });
            });
        }

        // Update current folder path text
        function updateFolderPath() {
            let path = '';
            
            if (state.activeDetailFolder) {
                path = state.activeDetailFolder;
            } else if (state.activeSubfolder) {
                const subfolder = subFolders[state.activeFolder]?.find(sf => sf.id === state.activeSubfolder);
                path = subfolder?.name || '';
            } else if (state.activeFolder) {
                path = mainFolders.find(f => f.id === state.activeFolder)?.name || '';
            } else {
                path = 'All Assets';
            }
            
            elements.currentFolderPath.textContent = path;
        }

        // Get filtered assets based on current state
        function getFilteredAssets() {
            // Start with filtering by folder structure
            let filtered = [...assets];
            
            if (state.activeFolder) {
                filtered = filtered.filter(asset => asset.folder === state.activeFolder);
                
                if (state.activeSubfolder) {
                    filtered = filtered.filter(asset => asset.subfolder === state.activeSubfolder);
                    
                    if (state.activeDetailFolder) {
                        filtered = filtered.filter(asset => asset.detailFolder === state.activeDetailFolder);
                    }
                }
            }
            
            // Then filter by search term
            if (state.searchTerm) {
                const search = state.searchTerm.toLowerCase();
                filtered = filtered.filter(asset => 
                    asset.name.toLowerCase().includes(search) ||
                    (asset.description && asset.description.toLowerCase().includes(search)) ||
                    asset.tags.some(tag => tag.toLowerCase().includes(search))
                );
            }
            
            // Finally sort the results
            filtered.sort((a, b) => {
                if (state.sortBy === 'date') {
                    return state.sortOrder === 'asc' 
                        ? new Date(a.dateModified) - new Date(b.dateModified)
                        : new Date(b.dateModified) - new Date(a.dateModified);
                } else if (state.sortBy === 'name') {
                    return state.sortOrder === 'asc'
                        ? a.name.localeCompare(b.name)
                        : b.name.localeCompare(a.name);
                } else if (state.sortBy === 'type') {
                    return state.sortOrder === 'asc'
                        ? a.type.localeCompare(b.type)
                        : b.type.localeCompare(a.type);
                }
                return 0;
            });
            
            return filtered;
        }

        // Render assets in grid view
        function renderGridView(filteredAssets) {
            elements.gridView.innerHTML = '';
            
            filteredAssets.forEach(asset => {
                const div = document.createElement('div');
                div.className = `bg-white rounded-lg shadow-sm border overflow-hidden ${
                    state.selectedAssets.includes(asset.id) ? 'ring-2 ring-blue-500 border-blue-500' : 'border-gray-200 hover:shadow-md'
                }`;
                
                div.innerHTML = `
                    <div class="p-1 flex justify-end">
                        <input
                            type="checkbox"
                            class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
                            data-asset-id="${asset.id}"
                            ${state.selectedAssets.includes(asset.id) ? 'checked' : ''}
                        >
                    </div>
                    <div class="flex justify-center p-4 bg-gray-50 h-40">
                        <img 
                            src="${asset.thumbnail}" 
                            alt="${asset.name}" 
                            class="h-full object-contain"
                        >
                    </div>
                    <div class="p-4">
                        <div class="flex items-center mb-2">
                            ${renderFileTypeIcon(asset.type, asset.extension)}
                            <span class="ml-2 uppercase text-xs font-bold text-gray-500">${asset.extension}</span>
                        </div>
                        <h3 class="text-sm font-medium text-gray-900 truncate" title="${asset.name}">
                            ${asset.name}
                        </h3>
                        <p class="text-xs text-gray-500 mt-1 truncate" title="${asset.description || ''}">
                            ${asset.description || ''}
                        </p>
                        <div class="mt-3 flex flex-wrap gap-1">
                            ${asset.tags.slice(0, 2).map(tag => `
                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800">
                                    ${tag}
                                </span>
                            `).join('')}
                            ${asset.tags.length > 2 ? `
                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800">
                                    +${asset.tags.length - 2}
                                </span>
                            ` : ''}
                        </div>
                    </div>
                    <div class="border-t border-gray-200 px-4 py-3 bg-gray-50 flex justify-between items-center">
                        <div class="text-xs text-gray-500">
                            ${new Date(asset.dateModified).toLocaleDateString()}
                        </div>
                        <button 
                            class="text-sm text-blue-600 hover:text-blue-800 view-asset"
                            data-asset-id="${asset.id}"
                        >
                            View
                        </button>
                    </div>
                `;
                
                elements.gridView.appendChild(div);
                
                // Add event listeners
                const checkbox = div.querySelector('input[type="checkbox"]');
                checkbox.addEventListener('change', (e) => {
                    toggleAssetSelection(asset.id);
                });
                
                const viewBtn = div.querySelector('.view-asset');
                viewBtn.addEventListener('click', () => {
                    viewAssetDetails(asset.id);
                });
            });
        }

        // Render assets in list view
        function renderListView(filteredAssets) {
            elements.assetList.innerHTML = '';
            
            filteredAssets.forEach(asset => {
                const tr = document.createElement('tr');
                tr.className = state.selectedAssets.includes(asset.id) ? 'bg-blue-50' : 'hover:bg-gray-50';
                
                tr.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <input
                            type="checkbox"
                            class="h-4 w-4 text-blue-600 border-gray-300 rounded"
                            data-asset-id="${asset.id}"
                            ${state.selectedAssets.includes(asset.id) ? 'checked' : ''}
                        >
                    </td>
                    <td class="px-6 py-4">
                        <div class="flex items-center">
                            <div class="flex-shrink-0 h-10 w-10 rounded bg-gray-100 flex items-center justify-center">
                                <img 
                                    src="${asset.thumbnail}" 
                                    alt="" 
                                    class="h-8 w-8 object-contain"
                                >
                            </div>
                            <div class="ml-4">
                                <div class="text-sm font-medium text-gray-900">${asset.name}</div>
                                <div class="text-sm text-gray-500 truncate max-w-xs">${asset.description || ''}</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            ${renderFileTypeIcon(asset.type, asset.extension)}
                            <span class="ml-2 text-sm text-gray-900">${asset.type}</span>
                            <span class="ml-1 text-xs text-gray-500">(.${asset.extension})</span>
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <div class="flex flex-wrap gap-1">
                            ${asset.tags.map(tag => `
                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800">
                                    ${tag}
                                </span>
                            `).join('')}
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        ${new Date(asset.dateModified).toLocaleDateString()}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <button 
                            class="text-blue-600 hover:text-blue-900 view-asset"
                            data-asset-id="${asset.id}"
                        >
                            View
                        </button>
                    </td>
                `;
                
                elements.assetList.appendChild(tr);
                
                // Add event listeners
                const checkbox = tr.querySelector('input[type="checkbox"]');
                checkbox.addEventListener('change', () => {
                    toggleAssetSelection(asset.id);
                });
                
                const viewBtn = tr.querySelector('.view-asset');
                viewBtn.addEventListener('click', () => {
                    viewAssetDetails(asset.id);
                });
            });
        }

        // Update view based on current state
        function updateView() {
            // Render folder navigation
            renderSubfolders();
            renderDetailFolders();
            updateFolderPath();
            
            // Get filtered assets
            const filteredAssets = getFilteredAssets();
            
            // Update empty state
            if (filteredAssets.length === 0) {
                elements.emptyState.classList.remove('hidden');
                elements.gridView.classList.add('hidden');
                elements.listView.classList.add('hidden');
                
                // Update empty state message
                if (state.searchTerm) {
                    elements.emptyStateMessage.textContent = 'Try a different search term';
                } else {
                    elements.emptyStateMessage.textContent = 'Get started by adding assets to this folder';
                }
            } else {
                elements.emptyState.classList.add('hidden');
                
                // Render assets based on view mode
                if (state.viewMode === 'grid') {
                    elements.gridView.classList.remove('hidden');
                    elements.listView.classList.add('hidden');
                    renderGridView(filteredAssets);
                } else {
                    elements.gridView.classList.add('hidden');
                    elements.listView.classList.remove('hidden');
                    renderListView(filteredAssets);
                }
            }
            
            // Update delete button state
            updateDeleteButton();
            
            // Update select all checkbox state
            updateSelectAllCheckbox(filteredAssets);
        }

        // Toggle asset selection
        function toggleAssetSelection(id) {
            if (state.selectedAssets.includes(id)) {
                state.selectedAssets = state.selectedAssets.filter(assetId => assetId !== id);
            } else {
                state.selectedAssets.push(id);
            }
            
            updateView();
        }

        // Update delete button state
        function updateDeleteButton() {
            if (state.selectedAssets.length > 0) {
                elements.deleteBtn.classList.remove('bg-gray-200', 'text-gray-400', 'cursor-not-allowed');
                elements.deleteBtn.classList.add('bg-red-600', 'text-white', 'hover:bg-red-700');
                elements.deleteBtn.disabled = false;
            } else {
                elements.deleteBtn.classList.add('bg-gray-200', 'text-gray-400', 'cursor-not-allowed');
                elements.deleteBtn.classList.remove('bg-red-600', 'text-white', 'hover:bg-red-700');
                elements.deleteBtn.disabled = true;
            }
        }

        // Update select all checkbox state
        function updateSelectAllCheckbox(filteredAssets) {
            if (!elements.selectAll) return;
            
            if (filteredAssets.length === 0) {
                elements.selectAll.checked = false;
                elements.selectAll.disabled = true;
            } else {
                elements.selectAll.disabled = false;
                
                if (state.selectedAssets.length === filteredAssets.length) {
                    elements.selectAll.checked = true;
                    elements.selectAll.indeterminate = false;
                } else if (state.selectedAssets.length > 0) {
                    elements.selectAll.checked = false;
                    elements.selectAll.indeterminate = true;
                } else {
                    elements.selectAll.checked = false;
                    elements.selectAll.indeterminate = false;
                }
            }
        }

        // Delete selected assets
        function deleteAssets() {
            if (state.selectedAssets.length === 0) return;
            
            // Filter out selected assets
            assets = assets.filter(asset => !state.selectedAssets.includes(asset.id));
            
            // Save to localStorage
            const saved = saveAssets();
            
            // Show status message
            if (saved) {
                showStatus(`${state.selectedAssets.length} asset(s) deleted successfully`);
            } else {
                showStatus('Error saving changes', 'error');
            }
            
            // Clear selection
            state.selectedAssets = [];
            
            // Update view
            updateView();
        }

        // View asset details
        function viewAssetDetails(id) {
            const asset = assets.find(a => a.id === id);
            if (!asset) return;
            
            state.currentAsset = asset;
            
            // Fill modal content
            elements.detailThumbnail.src = asset.thumbnail;
            elements.detailThumbnail.alt = asset.name;
            elements.detailPath.textContent = asset.path;
            elements.detailFullPath.textContent = asset.path;
            elements.detailTypeIcon.innerHTML = renderFileTypeIcon(asset.type, asset.extension);
            elements.detailName.textContent = asset.name;
            elements.detailFileInfo.textContent = `${asset.type.charAt(0).toUpperCase() + asset.type.slice(1)} • .${asset.extension} • ${asset.size}`;
            elements.detailDescription.textContent = asset.description || 'No description provided';
            
            // Tags
            elements.detailTags.innerHTML = '';
            if (asset.tags && asset.tags.length > 0) {
                asset.tags.forEach(tag => {
                    const span = document.createElement('span');
                    span.className = 'inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800';
                    span.textContent = tag;
                    elements.detailTags.appendChild(span);
                });
            } else {
                const span = document.createElement('span');
                span.className = 'text-sm text-gray-500';
                span.textContent = 'No tags';
                elements.detailTags.appendChild(span);
            }
            
            // Dates
            elements.detailCreated.textContent = new Date(asset.dateCreated).toLocaleDateString();
            elements.detailModified.textContent = new Date(asset.dateModified).toLocaleDateString();
            
            // Creator
            elements.detailCreator.textContent = asset.createdBy;
            
            // Dimensions (for images)
            if (asset.dimensions) {
                elements.detailDimensionsContainer.classList.remove('hidden');
                elements.detailDimensions.textContent = asset.dimensions;
            } else {
                elements.detailDimensionsContainer.classList.add('hidden');
            }
            
            // Duration (for video/audio)
            if (asset.duration) {
                elements.detailDurationContainer.classList.remove('hidden');
                elements.detailDuration.textContent = asset.duration;
            } else {
                elements.detailDurationContainer.classList.add('hidden');
            }
            
            // Location
            elements.detailLocation.innerHTML = '';
            
            // Main folder
            const mainFolderSpan = document.createElement('span');
            mainFolderSpan.textContent = mainFolders.find(f => f.id === asset.folder)?.name || '-';
            elements.detailLocation.appendChild(mainFolderSpan);
            
            // Arrow
            const arrow1 = document.createElement('svg');
            arrow1.className = 'h-4 w-4 text-gray-400';
            arrow1.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />';
            arrow1.setAttribute('fill', 'none');
            arrow1.setAttribute('viewBox', '0 0 24 24');
            arrow1.setAttribute('stroke', 'currentColor');
            elements.detailLocation.appendChild(arrow1);
            
            // Subfolder
            const subfolderSpan = document.createElement('span');
            subfolderSpan.textContent = subFolders[asset.folder]?.find(sf => sf.id === asset.subfolder)?.name || '-';
            elements.detailLocation.appendChild(subfolderSpan);
            
            // Detail folder (if exists)
            if (asset.detailFolder) {
                const arrow2 = document.createElement('svg');
                arrow2.className = 'h-4 w-4 text-gray-400';
                arrow2.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />';
                arrow2.setAttribute('fill', 'none');
                arrow2.setAttribute('viewBox', '0 0 24 24');
                arrow2.setAttribute('stroke', 'currentColor');
                elements.detailLocation.appendChild(arrow2);
                
                const detailFolderSpan = document.createElement('span');
                detailFolderSpan.textContent = asset.detailFolder;
                elements.detailLocation.appendChild(detailFolderSpan);
            }
            
            // Show modal
            elements.assetDetailModal.classList.add('active');
        }

        // Close asset detail modal
        function closeAssetDetail() {
            elements.assetDetailModal.classList.remove('active');
            state.currentAsset = null;
        }

        // Populate folder selects in upload modal
        function populateFolderSelects() {
            // Main folders
            elements.folderSelect.innerHTML = '';
            mainFolders.forEach(folder => {
                const option = document.createElement('option');
                option.value = folder.id;
                option.textContent = folder.name;
                elements.folderSelect.appendChild(option);
            });
            
            // Update subfolder select when main folder changes
            elements.folderSelect.addEventListener('change', () => {
                const folderId = elements.folderSelect.value;
                updateSubfolderSelect(folderId);
            });
            
            // Update detail folder select when subfolder changes
            elements.subfolderSelect.addEventListener('change', () => {
                const folderId = elements.folderSelect.value;
                const subfolderId = elements.subfolderSelect.value;
                updateDetailFolderSelect(folderId, subfolderId);
            });
        }

        // Update subfolder select based on selected main folder
        function updateSubfolderSelect(folderId) {
            elements.subfolderSelect.innerHTML = '<option value="">Select subfolder</option>';
            
            if (!folderId || !subFolders[folderId] || subFolders[folderId].length === 0) {
                elements.subfolderSelect.disabled = true;
                elements.detailFolderSelect.disabled = true;
                elements.detailFolderSelect.innerHTML = '<option value="">Select detail folder</option>';
                return;
            }
            
            elements.subfolderSelect.disabled = false;
            
            subFolders[folderId].forEach(subfolder => {
                const option = document.createElement('option');
                option.value = subfolder.id;
                option.textContent = subfolder.name;
                elements.subfolderSelect.appendChild(option);
            });
            
            // Reset detail folder select
            elements.detailFolderSelect.innerHTML = '<option value="">Select detail folder</option>';
            elements.detailFolderSelect.disabled = true;
        }

        // Update detail folder select based on selected subfolder
        function updateDetailFolderSelect(folderId, subfolderId) {
            elements.detailFolderSelect.innerHTML = '<option value="">Select detail folder</option>';
            
            if (!folderId || !subfolderId) {
                elements.detailFolderSelect.disabled = true;
                return;
            }
            
            const subfolder = subFolders[folderId]?.find(sf => sf.id === subfolderId);
            
            if (!subfolder || !subfolder.subfolders || subfolder.subfolders.length === 0) {
                elements.detailFolderSelect.disabled = true;
                return;
            }
            
            elements.detailFolderSelect.disabled = false;
            
            subfolder.subfolders.forEach(detailFolder => {
                const option = document.createElement('option');
                option.value = detailFolder;
                option.textContent = detailFolder;
                elements.detailFolderSelect.appendChild(option);
            });
        }

        // Show upload modal
        function showUploadModal() {
            // Reset form
            elements.assetName.value = '';
            elements.assetDescription.value = '';
            elements.assetType.value = 'image';
            elements.assetTags.value = '';
            elements.assetPath.value = '';
            
            // Set current folder as default
            if (state.activeFolder) {
                elements.folderSelect.value = state.activeFolder;
                updateSubfolderSelect(state.activeFolder);
                
                if (state.activeSubfolder) {
                    elements.subfolderSelect.value = state.activeSubfolder;
                    updateDetailFolderSelect(state.activeFolder, state.activeSubfolder);
                    
                    if (state.activeDetailFolder) {
                        elements.detailFolderSelect.value = state.activeDetailFolder;
                    }
                }
            } else {
                elements.folderSelect.selectedIndex = 0;
                updateSubfolderSelect(elements.folderSelect.value);
            }
            
            // Hide status
            elements.uploadStatus.classList.add('hidden');
            
            // Show modal
            elements.uploadModal.classList.add('active');
        }

        // Close upload modal
        function closeUploadModal() {
            elements.uploadModal.classList.remove('active');
        }

        // Upload a new asset
        function uploadAsset() {
            // Validate required fields
            if (!elements.assetName.value || !elements.assetPath.value) {
                showUploadStatus('Please provide both a name and file path', 'error');
                return;
            }
            
            // Get folder info
            const folder = elements.folderSelect.value;
            const subfolder = elements.subfolderSelect.value;
            const detailFolder = elements.detailFolderSelect.value;
            
            // Extract filename and extension from path
            const filePath = elements.assetPath.value;
            const filename = filePath.split(/[\/\\]/).pop();
            const extension = filename.split('.').pop().toLowerCase();
            
            // Create new asset
            const newId = (Math.max(...assets.map(a => parseInt(a.id) || 0)) + 1).toString();
            
            // Process tags
            const tags = elements.assetTags.value 
                ? elements.assetTags.value.split(',').map(tag => tag.trim()) 
                : [];
            
            // Get thumbnail based on type
            const type = elements.assetType.value;
            let thumbnail;
            
            switch(type) {
                case 'image':
                    thumbnail = 'https://via.placeholder.com/300/4F46E5/FFFFFF?text=IMG';
                    break;
                case 'video':
                    thumbnail = 'https://via.placeholder.com/300/7C3AED/FFFFFF?text=VID';
                    break;
                case 'document':
                    thumbnail = 'https://via.placeholder.com/300/DC2626/FFFFFF?text=DOC';
                    break;
                case 'audio':
                    thumbnail = 'https://via.placeholder.com/300/EA580C/FFFFFF?text=AUD';
                    break;
                case 'design':
                    thumbnail = 'https://via.placeholder.com/300/059669/FFFFFF?text=DESIGN';
                    break;
                default:
                    thumbnail = 'https://via.placeholder.com/300/6B7280/FFFFFF?text=FILE';
            }
            
            // Construct full path
            const folderName = mainFolders.find(f => f.id === folder)?.name || '';
            const subfolderName = subFolders[folder]?.find(sf => sf.id === subfolder)?.name || '';
            const fullPath = `/${folderName}/${subfolderName}${detailFolder ? `/${detailFolder}` : ''}/${filename}`;
            
            // Create asset object
            const newAsset = {
                id: newId,
                name: elements.assetName.value,
                description: elements.assetDescription.value,
                type: type,
                extension: extension,
                size: '0 MB',
                path: fullPath,
                folder: folder,
                subfolder: subfolder,
                detailFolder: detailFolder,
                tags: tags,
                dateCreated: new Date().toISOString().split('T')[0],
                dateModified: new Date().toISOString().split('T')[0],
                thumbnail: thumbnail,
                createdBy: 'Current User'
            };
            
            // Add dimensions if it's an image
            if (type === 'image') {
                newAsset.dimensions = '1920 x 1080 px';
            }
            
            // Add duration if it's a video or audio
            if (type === 'video' || type === 'audio') {
                newAsset.duration = '0:00';
            }
            
            // Add to assets array
            assets.push(newAsset);
            
            // Save to localStorage
            const saved = saveAssets();
            
            if (saved) {
                showStatus(`Asset "${newAsset.name}" has been added successfully`);
                closeUploadModal();
                
                // Navigate to the new asset location
                state.activeFolder = folder;
                state.activeSubfolder = subfolder;
                state.activeDetailFolder = detailFolder;
                
                // Update view
                updateView();
            } else {
                showUploadStatus('Error saving asset', 'error');
            }
        }

        // Show status message in the main UI
        function showStatus(message, type = 'success') {
            elements.statusMessage.textContent = message;
            
            if (type === 'error') {
                elements.statusMessage.classList.remove('bg-green-600');
                elements.statusMessage.classList.add('bg-red-600');
            } else {
                elements.statusMessage.classList.remove('bg-red-600');
                elements.statusMessage.classList.add('bg-green-600');
            }
            
            elements.statusMessage.classList.remove('hidden');
            
            // Hide after 3 seconds
            setTimeout(() => {
                elements.statusMessage.classList.add('hidden');
            }, 3000);
        }

        // Show status message in the upload modal
        function showUploadStatus(message, type = 'success') {
            elements.uploadStatus.textContent = message;
            
            if (type === 'error') {
                elements.uploadStatus.classList.remove('bg-green-50', 'text-green-700', 'border-green-200', 'bg-blue-50', 'text-blue-700', 'border-blue-200');
                elements.uploadStatus.classList.add('bg-red-50', 'text-red-700', 'border', 'border-red-200');
            } else if (type === 'info') {
                elements.uploadStatus.classList.remove('bg-green-50', 'text-green-700', 'border-green-200', 'bg-red-50', 'text-red-700', 'border-red-200');
                elements.uploadStatus.classList.add('bg-blue-50', 'text-blue-700', 'border', 'border-blue-200');
            } else {
                elements.uploadStatus.classList.remove('bg-red-50', 'text-red-700', 'border-red-200', 'bg-blue-50', 'text-blue-700', 'border-blue-200');
                elements.uploadStatus.classList.add('bg-green-50', 'text-green-700', 'border', 'border-green-200');
            }
            
            elements.uploadStatus.classList.remove('hidden');
        }

        // Helper function to render folder icon
        function renderFolderIcon(iconName) {
            switch(iconName) {
                case 'palette':
                    return `
                        <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M4 2a2 2 0 00-2 2v11a3 3 0 106 0V4a2 2 0 00-2-2H4zm1 14a1 1 0 100-2 1 1 0 000 2zm5-1.757l4.9-4.9a2 2 0 000-2.828L13.485 5.1a2 2 0 00-2.828 0L10 5.757v8.486zM16 18H9.071l6-6H16a2 2 0 012 2v2a2 2 0 01-2 2z" clip-rule="evenodd" />
                        </svg>
                    `;
                case 'utensils':
                    return `
                        <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                        </svg>
                    `;
                case 'camera':
                    return `
                        <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                    `;
                case 'bullhorn':
                    return `
                        <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z" />
                        </svg>
                    `;
                case 'image':
                    return `
                        <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                    `;
                case 'credit-card':
                    return `
                        <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" />
                        </svg>
                    `;
                case 'users':
                    return `
                        <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                        </svg>
                    `;
                default:
                    return `
                        <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1H8a3 3 0 00-3 3v1.5a1.5 1.5 0 01-3 0V6z" clip-rule="evenodd" />
                            <path d="M6 12A2 2 0 018 10h8a2 2 0 012 2v5a2 2 0 01-2 2H8a2 2 0 01-2-2v-5z" />
                        </svg>
                    `;
            }
        }

        // Helper function to render file type icon
        function renderFileTypeIcon(fileType, extension) {
            switch(fileType) {
                case 'image':
                    return `
                        <svg class="h-8 w-8 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                    `;
                case 'document':
                    return `
                        <svg class="h-8 w-8 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
                        </svg>
                    `;
                case 'video':
                    return `
                        <svg class="h-8 w-8 text-purple-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
                        </svg>
                    `;
                case 'audio':
                    return `
                        <svg class="h-8 w-8 text-orange-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3" />
                        </svg>
                    `;
                case 'design':
                    return `
                        <svg class="h-8 w-8 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" />
                        </svg>
                    `;
                default:
                    return `
                        <svg class="h-8 w-8 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                        </svg>
                    `;
            }
        }

        // Setup event listeners
        function setupEventListeners() {
            // View mode switcher
            elements.gridViewBtn.addEventListener('click', () => {
                state.viewMode = 'grid';
                elements.gridViewBtn.classList.add('bg-gray-100', 'text-gray-800');
                elements.gridViewBtn.classList.remove('text-gray-600');
                elements.listViewBtn.classList.remove('bg-gray-100', 'text-gray-800');
                elements.listViewBtn.classList.add('text-gray-600');
                updateView();
            });
            
            elements.listViewBtn.addEventListener('click', () => {
                state.viewMode = 'list';
                elements.listViewBtn.classList.add('bg-gray-100', 'text-gray-800');
                elements.listViewBtn.classList.remove('text-gray-600');
                elements.gridViewBtn.classList.remove('bg-gray-100', 'text-gray-800');
                elements.gridViewBtn.classList.add('text-gray-600');
                updateView();
            });
            
            // Sort controls
            elements.sortBySelect.addEventListener('change', () => {
                state.sortBy = elements.sortBySelect.value;
                updateView();
            });
            
            elements.sortOrderBtn.addEventListener('click', () => {
                state.sortOrder = state.sortOrder === 'asc' ? 'desc' : 'asc';
                
                if (state.sortOrder === 'asc') {
                    elements.sortOrderBtn.innerHTML = `
                        <svg class="h-5 w-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12" />
                        </svg>
                    `;
                } else {
                    elements.sortOrderBtn.innerHTML = `
                        <svg class="h-5 w-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4" />
                        </svg>
                    `;
                }
                
                updateView();
            });
            
            // Delete button
            elements.deleteBtn.addEventListener('click', () => {
                if (!elements.deleteBtn.disabled) {
                    deleteAssets();
                }
            });
            
            // Search input
            elements.searchInput.addEventListener('input', () => {
                state.searchTerm = elements.searchInput.value;
                updateView();
            });
            
            // Upload buttons
            elements.uploadBtn.addEventListener('click', showUploadModal);
            elements.emptyUploadBtn.addEventListener('click', showUploadModal);
            
            // Upload modal buttons
            elements.confirmUploadBtn.addEventListener('click', uploadAsset);
            elements.cancelUploadBtn.addEventListener('click', closeUploadModal);
            
            // Browse button (simulated)
            elements.browseBtn.addEventListener('click', () => {
                showUploadStatus('This would open a file browser in a real application', 'info');
            });
            
            // Asset detail modal close button
            elements.closeDetailBtn.addEventListener('click', closeAssetDetail);
            
            // Select all checkbox
            if (elements.selectAll) {
                elements.selectAll.addEventListener('change', () => {
                    const filteredAssets = getFilteredAssets();
                    
                    if (elements.selectAll.checked) {
                        state.selectedAssets = filteredAssets.map(asset => asset.id);
                    } else {
                        state.selectedAssets = [];
                    }
                    
                    updateView();
                });
            }
            
            // Mobile menu toggle
            if (elements.mobileMenuBtn) {
                elements.mobileMenuBtn.addEventListener('click', () => {
                    document.body.classList.toggle('mobile-menu-active');
                });
            }
            
            // Close modals when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target === elements.uploadModal) {
                    closeUploadModal();
                }
                
                if (e.target === elements.assetDetailModal) {
                    closeAssetDetail();
                }
            });
        }

        // Initialize the application
        init();
    </script>
</body>
</html>
